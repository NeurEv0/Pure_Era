<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pure-era Home</title>
    <link rel="stylesheet" href="./icon/iconfont.css">
    <link rel="shortcut icon" href="./icon/favicon.ico">
    <link rel="stylesheet" type="text/css" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://unpkg.com/tranzy/dist/tranzy.umd.js"></script>
    <script>
        window.addEventListener("DOMContentLoaded", () => {
          const links = document.querySelectorAll(".nav-menu a");
          const currentPath = window.location.pathname;
      
          links.forEach(link => {
            if (link.getAttribute("href") === currentPath.split("/").pop()) {
              link.classList.add("active");
            }
          });
        });
    </script>
    <style>
        .language-switch {
            background: rgba(255,255,255,0.2);
            color: white;
            border: none;
            padding: 6px 15px;
            border-radius: 20px;
            cursor: pointer;
            transition: 0.3s;
            font-size: 0.9em;
            position: relative;
            display: inline-block;
        }
        
        .language-switch:hover {
            background: rgba(255,255,255,0.3);
        }

        .language-dropdown {
            display: none;
            position: absolute;
            background: rgba(43, 16, 85, 0.95);
            min-width: 160px;
            box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
            z-index: 1000;
            border-radius: 10px;
            max-height: 300px;
            overflow-y: auto;
            right: 0;
        }
        
        .language-container:hover .language-dropdown {
            display: block;
        }
        
        .language-dropdown a {
            color: white;
            padding: 10px 15px;
            text-decoration: none;
            display: block;
            border-radius: 5px;
            white-space: nowrap;
        }
        
        .language-dropdown a:hover {
            background-color: rgba(255,255,255,0.1);
        }

        .language-container {
            position: relative;
            display: inline-block;
        }
        
        /* 新的语言选择器样式 */
        .language-selector {
            position: fixed;
            right: 20px;
            top: 100px; /* 调整到更合适的高度 */
            z-index: 10000;
        }

        .language-current {
            display: flex;
            align-items: center;
            padding: 10px 15px;
            cursor: pointer;
            background: rgba(43, 16, 85, 0.95);
            border-radius: 50px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.2);
            transition: all 0.3s cubic-bezier(0.25, 1, 0.5, 1); /* 使用缓动函数让动画更自然 */
            overflow: hidden;
        }

        .language-current i {
            font-size: 18px;
            color: white;
            margin-right: 0; /* 默认没有右边距 */
            transition: margin 0.3s cubic-bezier(0.25, 1, 0.5, 1);
        }

        .language-current span {
            max-width: 0;
            opacity: 0;
            color: white;
            white-space: nowrap;
            overflow: hidden;
            transition: all 0.3s cubic-bezier(0.25, 1, 0.5, 1);
        }

        /* 悬停时的动画变化 */
        .language-selector:hover .language-current {
            padding-right: 15px;
            border-radius: 10px;
            border-bottom-left-radius: 0;
            border-bottom-right-radius: 0;
        }

        .language-selector:hover .language-current i {
            margin-right: 8px;
        }

        .language-selector:hover .language-current span {
            max-width: 120px;
            opacity: 1;
            padding-left: 5px;
        }

        .language-options {
            display: none;
            position: absolute;
            top: 100%;
            right: 0;
            background: rgba(43, 16, 85, 0.95);
            border-radius: 10px;
            border-top-right-radius: 0;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            width: 180px;
            max-height: 350px;
            overflow-y: auto;
            transform: translateY(-10px);
            opacity: 0;
            transition: all 0.3s cubic-bezier(0.25, 1, 0.5, 1);
        }

        .language-selector:hover .language-options {
            display: block;
            transform: translateY(0);
            opacity: 1;
            animation: fadeDown 0.3s cubic-bezier(0.25, 1, 0.5, 1);
        }

        @keyframes fadeDown {
            from {
                transform: translateY(-10px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .language-options a {
            display: block;
            padding: 10px 15px;
            color: white;
            text-decoration: none;
            transition: background 0.2s ease;
            border-radius: 5px;
            margin: 5px;
        }

        .language-options a:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        /* 为最后一个元素添加圆角 */
        .language-options a:last-child {
            margin-bottom: 10px;
        }

        /* 为第一个元素添加顶部间距 */
        .language-options a:first-child {
            margin-top: 10px;
        }

        /* 自定义滚动条样式 */
        .language-options::-webkit-scrollbar {
            width: 5px;
        }

        .language-options::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
        }

        .language-options::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.3);
            border-radius: 5px;
        }

        /* 特性块的交互效果样式 */
        .characteristic-block {
            position: relative;
            cursor: pointer;
            overflow: hidden;
            /* 初始状态设置为隐藏 */
            opacity: 0;
            transform: translateY(30px);
            transition: opacity 0.8s ease, transform 0.8s ease, box-shadow 0.3s ease;
            will-change: transform;
        }

        .characteristic-block.appear {
            opacity: 1;
            transform: translateY(0);
        }

        .characteristic-block:hover {
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
        }

        .animation-dot {
            position: absolute;
            top: 15px;
            right: 15px;
            width: 10px;
            height: 10px;
            background-color: #fff;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        .hover-effect {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at var(--x) var(--y), rgba(255, 255, 255, 0.3) 0%, rgba(255, 255, 255, 0) 60%);
            opacity: 0;
            transition: opacity 0.3s ease;
            pointer-events: none;
        }

        .characteristic-block:hover .hover-effect {
            opacity: 1;
        }

        .characteristic-block.clicked {
            animation: click-pulse 0.3s ease;
        }

        /* 特性块的视差滚动效果 */
        .characteristics-section {
            position: relative;
            perspective: 1000px;
        }

        .characteristic-block:nth-child(1) {
            transform: translateZ(0);
        }

        .characteristic-block:nth-child(2) {
            transform: translateZ(-5px);
        }

        .characteristic-block:nth-child(3) {
            transform: translateZ(-10px);
        }

        @keyframes click-pulse {
            0% {
                transform: scale(1);
            }
            50% {
                transform: scale(0.95);
            }
            100% {
                transform: scale(1);
            }
        }

        @keyframes pulse {
            0% {
                transform: scale(1);
                opacity: 0.7;
            }
            50% {
                transform: scale(1.2);
                opacity: 1;
            }
            100% {
                transform: scale(1);
                opacity: 0.7;
            }
        }

        /* 弹出详情样式 */
        .popup-detail {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(43, 16, 85, 0.9);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s, visibility 0.3s;
        }

        .popup-detail.active {
            opacity: 1;
            visibility: visible;
        }

        .popup-content {
            background-color: white;
            padding: 30px;
            border-radius: 10px;
            width: 80%;
            max-width: 600px;
            max-height: 80vh;
            overflow-y: auto;
            position: relative;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            transform: scale(0.9);
            transition: transform 0.3s, opacity 0.3s;
            opacity: 0;
        }

        .popup-detail.active .popup-content {
            transform: scale(1);
            opacity: 1;
        }

        .close-popup {
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 24px;
            color: #2b1055;
            background: none;
            border: none;
            cursor: pointer;
        }
    </style>
</head>
<body class="home-page">
        <header>
          <div class="logo-container">
            <a href="#" class="logo">
              <img src="logo.png"  style="vertical-align: middle; height: 30px;">
              SPADE
            </a>
            <a href="https://2025.igem.wiki/xjtlu - software" class="team-link" target="_blank" rel="noopener noreferrer">Belongs to 2025-XJTLU-Software</a>
          </div>
          <button class="nav-toggle" aria-label="Toggle navigation">
            <i class="fas fa-bars"></i>
          </button>
          <ul class="nav-menu">
            <li><a href="home.html">Home</a></li>
            <li><a href="search.html">Search</a></li>
            <li><a href="tools.html">Tools</a></li>
            <li><a href="statistics.html">Statistics</a></li>
            <!-- <li><a href="amp_visualization.html">AMP Visualization</a></li> -->
            <li><a href="chat.html">Chat</a></li>
        </ul>
        </header>

    <!-- 新的语言选择器UI - 放在右上角 -->
    <div class="language-selector">
        <div class="language-current" id="currentLang">
            <i class="fas fa-globe"></i>
            <span id="currentLangText">English</span>
        </div>
        <div class="language-options">
            <a href="#" data-lang="en" class="no-translate">English</a>
            <a href="#" data-lang="zh-Hans" class="no-translate">中文 (简体)</a>
            <a href="#" data-lang="zh-Hant" class="no-translate">繁體中文</a>
            <a href="#" data-lang="ja" class="no-translate">日本語</a>
            <a href="#" data-lang="ko" class="no-translate">한국어</a>
            <a href="#" data-lang="fr" class="no-translate">Français</a>
            <a href="#" data-lang="de" class="no-translate">Deutsch</a>
            <a href="#" data-lang="es" class="no-translate">Español</a>
            <a href="#" data-lang="ru" class="no-translate">Русский</a>
        </div>
    </div>

    <section class="search-section">
        <h1 class="title">Welcome to <span class="spade-custom">SPADE</span> Database</h1>
        <p class="subtitle"> System for Antimicrobial Peptide Management and Database</p>
        <div class="search-container">
            <select class="search-category">
                <option value="all">All Categories</option>
                <option value="antibiotic">Antibiotic</option>
                <option value="peptide">Peptide</option>
            </select>
            <div class="search-input-wrapper">
                <input type="text" 
                       class="search-input" 
                       placeholder="enter name or ID" 
                       required>
                       <span class="search-icon"><i class="fas fa-search"></i></span>
            </div>
        </div>
    </section>

    <section class="characteristics-section">
        <div class="characteristic-block">
            <div class="animation-dot"></div>
            <h3>Characteristic1</h3>
            <p>part1111111</p>
            <div class="hover-effect"></div>
        </div>
        <div class="characteristic-block">
            <!-- <img src="https://via.placeholder.com/300x200" alt="Part 2"> -->
            <div class="animation-dot"></div>
            <h3>Characteristic2</h3>
            <p>part222222</p>
            <div class="hover-effect"></div>
        </div>
        <div class="characteristic-block">
            <!-- <img src="https://via.placeholder.com/300x200" alt="Part 3"> -->
            <div class="animation-dot"></div>
            <h3>Characteristic3</h3>
            <p>part333333</p>
            <div class="hover-effect"></div>
        </div>
    </section>

    <script>
        const navToggle = document.querySelector('.nav-toggle');
        const navMenu = document.querySelector('.nav-menu');

        navToggle.addEventListener('click', () => {
            navMenu.classList.toggle('active');
        });

        // 保存语言偏好
        function saveLanguagePreference(lang) {
            localStorage.setItem('preferredLanguage', lang);
        }

        // 获取保存的语言偏好
        function getLanguagePreference() {
            return localStorage.getItem('preferredLanguage') || 'en';
        }
        
        // 获取语言显示名称
        function getLanguageDisplayName(langCode) {
            const langNames = {
                'en': 'English',
                'zh-Hans': '中文 (简体)',
                'zh-Hant': '繁體中文',
                'ja': '日本語',
                'ko': '한국어',
                'fr': 'Français',
                'de': 'Deutsch',
                'es': 'Español',
                'ru': 'Русский'
            };
            return langNames[langCode] || langCode;
        }

        // 设置初始语言
        document.addEventListener('DOMContentLoaded', function() {
            // 创建特殊名词配置库
            window.specialTerms = {
                'en': { 'PURE-ERA': 'PURE-ERA' }, 
                'zh-Hans': {
                    'PURE-ERA': 'PURE-ERA',
                    'Welcome to PURE-ERA Database': '欢迎使用PURE-ERA数据库',
                    'an useful database of antimicrobial peptides': '一个实用的抗菌肽数据库',
                    'enter name or ID': '输入名称或ID',
                    'All Categories': '所有类别',
                    'Antibiotic': '抗生素',
                    'Peptide': '肽',
                    'Home': '首页',
                    'Search': '搜索',
                    'Tools': '工具',
                    'Statistics': '统计',
                    'Characteristic1': '特点1',
                    'Characteristic2': '特点2',
                    'Characteristic3': '特点3',
                    'Belongs to 2025-XJTLU-Software': '属于2025-XJTLU-Software团队'
                },
                'zh-Hant': {
                    'PURE-ERA': 'PURE-ERA',
                    'Welcome to PURE-ERA Database': '欢迎使用PURE-ERA数据库',
                    'an useful database of antimicrobial peptides': '一个实用的抗菌肽数据库',
                    'enter name or ID': '输入名称或ID',
                    'All Categories': '所有类别',
                    'Antibiotic': '抗生素',
                    'Peptide': '肽',
                    'Home': '首页',
                    'Search': '搜索',
                    'Tools': '工具',
                    'Statistics': '统计',
                    'Characteristic1': '特点1',
                    'Characteristic2': '特点2',
                    'Characteristic3': '特点3',
                    'Belongs to 2025-XJTLU-Software': '属于2025-XJTLU-Software团队'
                },
                'ja': {
                    'PURE-ERA': 'PURE-ERA',
                    'Welcome to PURE-ERA Database': 'PURE-ERAデータベースへようこそ',
                    'an useful database of antimicrobial peptides': '抗菌ペプチドの実用的なデータベース',
                    'Home': 'ホーム',
                    'Search': '検索',
                    'Tools': 'ツール',
                    'Statistics': '統計'
                },
                'ko': { 'PURE-ERA': 'PURE-ERA' },
                'fr': { 'PURE-ERA': 'PURE-ERA' },
                'de': { 'PURE-ERA': 'PURE-ERA' },
                'es': { 'PURE-ERA': 'PURE-ERA' },
                'ru': { 'PURE-ERA': 'PURE-ERA' }
            };
            
            const savedLang = getLanguagePreference();
            document.documentElement.lang = savedLang;
            
            // 更新当前语言显示 - 确保不翻译语言名称
            updateCurrentLanguageDisplay();
            
            // 初始化多语言选择
            const langOptions = document.querySelectorAll('.language-options a');
            langOptions.forEach(option => {
                option.addEventListener('click', function(e) {
                    e.preventDefault();
                    const newLang = this.getAttribute('data-lang');
                    if (newLang === document.documentElement.lang) return;
                    
                    // 保存语言设置并刷新页面
                    saveLanguagePreference(newLang);
                    
                    // 获取当前URL并添加时间戳参数以确保刷新
                    const currentUrl = new URL(window.location.href);
                    currentUrl.searchParams.set('ts', Date.now());
                    window.location.href = currentUrl.toString();
                });
            });
            
            // 初始化翻译
            initializeTranslation(savedLang);
        });
        
        // 更新当前语言显示 - 确保不翻译语言名称
        function updateCurrentLanguageDisplay() {
            const currentLang = document.getElementById('currentLang');
            const currentLangText = document.getElementById('currentLangText');
            
            // 更新文本内容
            currentLangText.textContent = getLanguageDisplayName(document.documentElement.lang);
            
            // 确保语言名称不被翻译
            currentLang.classList.add('no-translate');
            currentLangText.classList.add('no-translate');
        }
        
        // 初始化翻译函数
        function initializeTranslation(lang) {
            const tranzy = new Tranzy.Translator({
                toLang: lang,
                fromLang: 'en',
                ignore: ['.no-translate', 'input', 'select', '.search-icon', '.language-dropdown a'],
                manualDict: window.specialTerms
            });
            
            tranzy.translatePage();
            tranzy.startObserver();
            
            // 将翻译实例保存到全局变量，以便之后销毁
            window.tranzyInstance = tranzy;
        }
        
        // 提供一个全局函数用于动态添加或修改特殊名词
        window.updateSpecialTerm = function(term, translation, language) {
            language = language || document.documentElement.lang;
            if (!window.specialTerms[language]) {
                window.specialTerms[language] = {};
            }
            window.specialTerms[language][term] = translation;
            
            // 如果当前语言匹配，立即应用更新
            if (language === document.documentElement.lang && window.tranzyInstance) {
                window.tranzyInstance.destroy();
                initializeTranslation(language);
            }
        };

        // 为特性块添加鼠标移动效果
        document.addEventListener('DOMContentLoaded', function() {
            const blocks = document.querySelectorAll('.characteristic-block');
            const section = document.querySelector('.characteristics-section');
            
            // 添加视差滚动效果
            window.addEventListener('scroll', function() {
                const scrollTop = window.pageYOffset;
                const sectionTop = section.offsetTop;
                const scrollPosition = scrollTop - sectionTop;
                
                if (scrollPosition > -window.innerHeight && scrollPosition < section.offsetHeight) {
                    blocks.forEach((block, index) => {
                        // 只有已经出现的块才应用视差效果
                        if (block.classList.contains('appear')) {
                            const speed = (index + 1) * 0.05;
                            const yPos = scrollPosition * speed;
                            // 使用transform3d以启用硬件加速
                            block.style.transform = `translate3d(0, ${yPos}px, ${-index * 5}px)`;
                            
                            // 添加悬停效果
                            if (block.classList.contains('hovered')) {
                                block.style.transform = `translate3d(0, ${yPos - 10}px, ${-index * 5}px)`;
                            }
                        }
                    });
                }
            });
            
            // 创建滚动观察器来检测特性块的可见性
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    // 当元素进入视口时
                    if (entry.isIntersecting) {
                        // 添加一个小延迟，使元素逐个显示
                        const block = entry.target;
                        const index = Array.from(blocks).indexOf(block);
                        
                        setTimeout(() => {
                            block.classList.add('appear');
                        }, index * 200); // 每个块延迟200ms显示
                        
                        // 元素已显示，不再观察
                        observer.unobserve(block);
                    }
                });
            }, {
                threshold: 0.1 // 当10%的元素可见时触发
            });
            
            // 开始观察所有特性块
            blocks.forEach(block => {
                observer.observe(block);
                
                // 添加鼠标悬停状态标记
                block.addEventListener('mouseenter', function() {
                    this.classList.add('hovered');
                });
                
                block.addEventListener('mouseleave', function() {
                    this.classList.remove('hovered');
                });
            });
            
            blocks.forEach((block, index) => {
                const effect = block.querySelector('.hover-effect');
                
                block.addEventListener('mousemove', function(e) {
                    const rect = this.getBoundingClientRect();
                    const x = e.clientX - rect.left;
                    const y = e.clientY - rect.top;
                    
                    effect.style.setProperty('--x', `${x}px`);
                    effect.style.setProperty('--y', `${y}px`);
                });
                
                // 点击效果
                block.addEventListener('click', function() {
                    this.classList.add('clicked');
                    setTimeout(() => {
                        this.classList.remove('clicked');
                    }, 300);
                    
                    // 显示对应的弹出详情
                    const popupId = `popup${index + 1}`;
                    const popup = document.getElementById(popupId);
                    popup.classList.add('active');
                });
            });
            
            // 关闭弹窗按钮
            const closeButtons = document.querySelectorAll('.close-popup');
            closeButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const popup = this.closest('.popup-detail');
                    popup.classList.remove('active');
                });
            });
            
            // 点击弹窗外部关闭
            const popups = document.querySelectorAll('.popup-detail');
            popups.forEach(popup => {
                popup.addEventListener('click', function(e) {
                    if (e.target === this) {
                        this.classList.remove('active');
                    }
                });
            });
            
            // 随机改变动画点的颜色
            setInterval(() => {
                const dots = document.querySelectorAll('.animation-dot');
                const colors = ['#fff', '#ffcc00', '#ff6699', '#66ccff', '#99ff99'];
                
                dots.forEach(dot => {
                    const randomColor = colors[Math.floor(Math.random() * colors.length)];
                    dot.style.backgroundColor = randomColor;
                });
            }, 3000);
        });
    </script>

    <!-- 弹出详情模板 -->
    <div class="popup-detail" id="popup1">
        <div class="popup-content">
            <button class="close-popup">&times;</button>
            <h2>Characteristic1</h2>
            <p>这里是特性1的详细描述，可以包含更多信息。Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris.</p>
        </div>
    </div>

    <div class="popup-detail" id="popup2">
        <div class="popup-content">
            <button class="close-popup">&times;</button>
            <h2>Characteristic2</h2>
            <p>这里是特性2的详细描述，可以包含更多信息。Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris.</p>
        </div>
    </div>

    <div class="popup-detail" id="popup3">
        <div class="popup-content">
            <button class="close-popup">&times;</button>
            <h2>Characteristic3</h2>
            <p>这里是特性3的详细描述，可以包含更多信息。Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris.</p>
        </div>
    </div>
</body>
</html>

<style>
    /* 滚动条整体样式 */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

/* 滚动条轨道 */
::-webkit-scrollbar-track {
  background: rgba(255,255,255,0.05);
  border-radius: 10px;
}

/* 滚动条滑块 */
::-webkit-scrollbar-thumb {
  background: rgba(255,255,255,0.2);
  border-radius: 10px;
}

/* 鼠标悬停时的滑块 */
::-webkit-scrollbar-thumb:hover {
  background: rgba(255,255,255,0.3);
}
</style>

