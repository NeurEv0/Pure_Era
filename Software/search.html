<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title>search peptides</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <link rel="shortcut icon" href="./icon/favicon.ico">
  <style>
    @import url('https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700,800,900&display=swap');
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Poppins', sans-serif;
    }

    body {
      min-height: 100vh;
      background: linear-gradient(#2b1055, #7597de);
    }

    /* body:not(.home-page) {
    background: #fff; /* 非 Home 页背景色 */
/* } */
body:not(.home-page) header {
    background: #2b1055;
    position :fixed; 
    top: 0;
    left: 0;
    width: 100%;
    padding: 15px 100px;
    display: flex;
    justify-content: space-between;
    align-items: center; /* 非 Home 页导航栏颜色 */
}

.logo-container {
    position: relative;
    display: inline-block;
    align-items: center;
}

.team-link {
    font-size: 0.6em;
    color: rgba(255, 255, 255, 0.8);
    display: block;
    margin-top: 5px;
    letter-spacing: 1px;
    text-decoration: underline; 
    transition: color 0.3s ease; 
}

.team-link:hover {
    color: #fff; 
}

header .logo {
    color: #fff;
    font-weight: 800;
    text-decoration: none;
    font-size: 1.6em;
    text-transform: uppercase;
    letter-spacing: 2px;
    display: flex;
    align-items: center;
}
header .logo img {
    margin-right: 10px; 
}

.logo-container span {
    font-size: 4em;
    color: rgba(255, 255, 255, 0.8);
    display: inline-block;
    margin-top: 3px;
    letter-spacing: 1px;
}

.team-link {
    font-size: 1em; 
    color: rgba(255,255,255,0.8); 
    display: block;
    margin-top: 6px; 
    letter-spacing: 1px;
}

header ul
{
    display: flex;
    justify-content: center;
    align-items: center;
    /* font-size: large; */
}
header ul li
{
    list-style: none;
    margin-left: 20px;
}
header ul li a
{
    text-decoration: none;
    padding: 6px 15px;
    color:#fff;
    border-radius: 20px;
}

header ul li a:hover,
header ul li a.active
{
    background: #fff;
    color:#2b1055;
}

/* 导航栏切换按钮样式 */
.nav-toggle {
    display: none;
    background: none;
    border: none;
    color: white;
    font-size: 1.5em;
    cursor: pointer;
}

/* 媒体查询，手机端样式 */
@media (max-width: 768px) {
    header {
        padding: 30px 50px;
    }

    .nav-toggle {
        display: block;
    }

    .nav-menu {
        display: none;
        position: absolute;
        top: 100%;
        left: 0;
        width: 100%;
        background: #7e70cfed;
        flex-direction: column;
        align-items: center;
        padding: 20px 0;
    }

    .nav-menu.active {
        display: flex;
    }

    .nav-menu li {
        margin: 10px 0;
    }
    .search-input {
        width: 300px;
    }
}

    .main-container {
      position: relative;
      top: 100px; 
      display: grid;
      grid-template-columns: 300px 1fr; 
      gap: 30px;
      height: calc(100vh - 100px); 
      overflow: hidden;
      width: 90%;
      margin: 0 auto;
    }

    .filter {
      position: sticky;
      top: 100px; /* header 高度 */
      height: fit-content;
      background: rgba(255,255,255,0.1);
      padding: 30px;
      border-radius: 20px;
      backdrop-filter: blur(10px);
    }

    .table-container {
      overflow-y: auto;
      height: 100%;
      background: rgba(255,255,255,0.1);
      padding: 30px;
      border-radius: 20px;
      backdrop-filter: blur(10px);
    }

    .form-group {
      margin-bottom: 20px;
    }

    label {
      color: rgba(255,255,255,0.9);
      display: block;
      margin-bottom: 8px;
    }

    input {
      width: 100%;
      padding: 12px 20px;
      background: rgba(255,255,255,0.05);
      border: 2px solid rgba(255,255,255,0.3);
      border-radius: 25px;
      color: white;
      font-size: 1em;
    }

    .btn {
      background: #0077cc;
      color: white;
      padding: 12px 30px;
      border: none;
      border-radius: 25px;
      cursor: pointer;
      transition: 0.3s;
      margin-top: 15px;
    }

    .btn:hover {
      background: #005fa3;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      color: white;
    }

    th, td {
      padding: 15px;
      text-align: left;
      border-bottom: 1px solid rgba(255,255,255,0.1);
    }

    th {
      background: rgba(255,255,255,0.1);
    }
  </style>
</head>

<body class="other-page">
  <header>
    <div class="logo-container">
      <a href="#" class="logo">
        <img src="logo.png"  style="vertical-align: middle; height: 30px;">
        PURE-ERA
      </a>
      <a href="https://2025.igem.wiki/xjtlu - software" class="team-link" target="_blank" rel="noopener noreferrer">Belongs to 2025-XJTLU-Software</a>
    </div>
    <button class="nav-toggle" aria-label="Toggle navigation">
      <i class="fas fa-bars"></i>
    </button>
    <ul class="nav-menu">
      <li><a href="home.html">Home</a></li>
      <li><a href="search.html">Search</a></li>
      <li><a href="tools.html">Tools</a></li>
      <li><a href="statistics.html">Statistics</a></li>
    </ul>
  </header>

  <div class="main-container">
    <div class="filter">
      <div class="form-group">
        <label>ID</label>
        <input type="text" id="idInput" placeholder="Input ID">
      </div>
      <div class="form-group">
        <label>Name</label>
        <input type="text" id="nameInput" placeholder="Input Name">
      </div>
      <div class="form-group">
        <label>Sequence</label>
        <input type="text" id="sequenceInput" placeholder="Input Sequence">
      </div>
      <div class="form-group">
        <label>Sequence Length</label>
        <input type="text" id="lengthInput" placeholder="For example: 10-50">
      </div>
      <button class="btn" onclick="search()">Search</button>
      <button class="btn" onclick="exportCSV()">Export CSV</button>
    </div>
    <div class="table-container">
      <table id="resultsTable">
        <thead>
          <tr>
            <th>ID</th>
            <th>Name</th>
            <th>Sequence</th>
            <th>Action</th>
          </tr>
        </thead>
        <tbody id="table-body">
          <!-- 动态生成的表格行将插入这里 -->
        </tbody>
        <!-- 修正后的静态表格行示例 -->
        <!-- <tbody>
          <tr>
            <td>DRAMP00005</td>
            <td>Epicidin 280</td>
            <td>SLGPAIKATRQVCPKATRFVTVSCKKSDCQ</td>
            <td>
              <button class="btn" onclick="window.location.href='peptide_card.html?id=DRAMP00005'">View</button>
            </td>
          </tr>
          <tr>
            <td>DRAMP00015</td>
            <td>Geobacillin II (nisin analog; Bacteriocin)</td>
            <td>STIVCVSLRICNWSLRFCPSFKVRCPM</td>
            <td>
              <button class="btn" onclick="window.location.href='peptide_card.html?id=DRAMP00015'">View</button>
            </td>
          </tr>
        </tbody> -->
      </table>
    </div>
  </div>

  <script>
    const navToggle = document.querySelector('.nav-toggle');
    const navMenu = document.querySelector('.nav-menu');

    navToggle.addEventListener('click', () => {
      navMenu.classList.toggle('active');
    });

    // 导航交互
    document.querySelectorAll('header ul li').forEach(li => {
      li.addEventListener('click', function() {
        document.querySelectorAll('header ul li').forEach(item => 
          item.classList.remove('active'));
        this.classList.add('active');
      });
    });

    // 点击外部关闭弹窗
    window.onclick = function(event) {
      if (event.target == document.getElementById('detailModal')) {
        closeModal();
      }
    }

    // 存储所有 JSON 文件的路径，这里你可以根据实际情况添加更多
    const jsonFiles = ['DRAMP00005.json', 'DRAMP00015.json'];

    // 加载所有 JSON 文件并填充表格
    Promise.all(jsonFiles.map(file => 
      fetch(`./database/${file}`)
        .then(response => {
          if (!response.ok) {
            throw new Error('网络响应有问题');
          }
          return response.json();
        })
    ))
    .then(dataArray => {
      const tableBody = document.getElementById('table-body');
      dataArray.forEach(data => {
        const row = document.createElement('tr');
        const idCell = document.createElement('td');
        idCell.textContent = data['DRAMP ID'];
        row.appendChild(idCell);

        const nameCell = document.createElement('td');
        nameCell.textContent = data['Peptide Name'];
        row.appendChild(nameCell);

        const sequenceCell = document.createElement('td');
        sequenceCell.textContent = data['Sequence'];
        row.appendChild(sequenceCell);

        const actionCell = document.createElement('td');
        const viewButton = document.createElement('button');
        viewButton.className = 'btn';
        viewButton.textContent = 'View';
        viewButton.onclick = function() {
          const url = `peptide_card.html?DRAMP ID=${data['DRAMP ID']}`;
          console.log('跳转链接:', url);
          window.location.href = url;
        };
        actionCell.appendChild(viewButton);
        row.appendChild(actionCell);

        tableBody.appendChild(row);
      });
    })
    .catch(error => {
      console.error('数据加载失败:', error);
    });

     function search() {
  const id = document.getElementById("idInput").value.trim();
  const name = document.getElementById("nameInput").value.trim();
  
  // 优先用 ID，其次用 Name
  if (id) {
    window.location.href = `peptide_card.html?id=${encodeURIComponent(id)}`;
  } else if (name) {
    window.location.href = `peptide_card.html?name=${encodeURIComponent(name)}`;
  } else {
    alert("请输入 ID 或 Name 进行跳转");
  }
}

    function exportCSV() {
      // 导出 CSV 功能实现
    }
  </script>
</body>
</html>
