<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title>SPADE Search</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <link rel="shortcut icon" href="../icon/favicon.ico">
  <script src="https://unpkg.com/tranzy/dist/tranzy.umd.js"></script>
  <style>
     @import url('https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700,800,900&display=swap');
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Poppins', sans-serif;
    }
    html, body {
      min-height: 100vh;
      margin: 0;
      padding: 0;
      display: flex;
      flex-direction: column;
      background: #ffffff;  /* æ”¹ä¸ºçº¯ç™½èƒŒæ™¯ */
      color: #2b1055;        /* æ–‡æœ¬é¢œè‰²å»ºè®®é…åˆè°ƒæ•´ */
      overflow-x: hidden;
    }

    /* 2. é¡µé¢ä¸»ä½“å†…å®¹éœ€è¦èƒ½å¤Ÿè‡ªåŠ¨æ’‘å¼€ç©ºé—´ */
    .main-content {
      flex: 1;
    }
   

    /* body:not(.home-page) {
    background: #fff; /* é Home é¡µèƒŒæ™¯è‰² */
/* } */
body:not(.home-page) header {
    background: linear-gradient(to bottom, rgba(43, 16, 85, 0.98) 0%, rgba(43, 16, 85, 0.9) 100%);
    position: fixed; 
    top: 0;
    left: 0;
    width: 100%;
    padding: 15px 100px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
    z-index: 1000;
    backdrop-filter: blur(8px);
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    transition: background 0.3s ease;
}


.logo-container {
    position: relative;
    display: inline-block;
    align-items: center;
}

.team-link {
    font-size: 0.6em;
    color: rgba(255, 255, 255, 0.8);
    display: block;
    margin-top: 5px;
    letter-spacing: 1px;
    text-decoration: underline; 
    transition: color 0.3s ease; 
}

.team-link:hover {
    color: #fff; 
}

header .logo {
    color: #fff;
    font-weight: 800;
    text-decoration: none;
    font-size: 1.6em;
    text-transform: uppercase;
    letter-spacing: 2px;
    display: flex;
    align-items: center;
}
header .logo img {
    margin-right: 10px; 
}

.logo-container span {
    font-size: 4em;
    color: rgba(255, 255, 255, 0.8);
    display: inline-block;
    margin-top: 3px;
    letter-spacing: 1px;
}

.team-link {
    font-size: 1em; 
    color: rgba(255,255,255,0.8); 
    display: block;
    margin-top: 6px; 
    letter-spacing: 1px;
}

header ul
{
    display: flex;
    justify-content: center;
    align-items: center;
    /* font-size: large; */
}
header ul li
{
    list-style: none;
    margin-left: 20px;
}
header ul li a {
    text-decoration: none;
    padding: 6px 15px;
    color: #fff;
    border-radius: 20px;
}

header ul li a:hover,
header ul li a.active {
    background: rgba(255, 255, 255, 0.9);
    color:  #2b1055;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
    transform: translateY(-2px);
    transition: all 0.3s ease;
}


/* å¯¼èˆªæ åˆ‡æ¢æŒ‰é’®æ ·å¼ */
.nav-toggle {
    display: none;
    background: none;
    border: none;
    color: #fff;
    font-size: 1.5em;
    cursor: pointer;
}


/* åª’ä½“æŸ¥è¯¢ï¼Œå“åº”å¼è®¾è®¡ */
/* å¤§å‹è®¾å¤‡ï¼ˆ1440pxä»¥ä¸Šï¼‰çš„æ ·å¼ */
@media (min-width: 1441px) {
    .main-container {
        width: 85%;
        max-width: 1600px;
    }
    
    .filter {
        width: 300px;
    }
    
    .table-container {
        flex: 1;
    }
}

/* ä¸­å‹æ¡Œé¢è®¾å¤‡ (1280px - 1440px) */
@media (min-width: 1280px) and (max-width: 1440px) {
    .main-container {
        width: 90%;
    }
    
    .filter {
        width: 280px;
    }
}

/* å°å‹æ¡Œé¢è®¾å¤‡ (1024px - 1279px) */
@media (min-width: 1024px) and (max-width: 1279px) {
    header {
        padding: 15px 50px;
    }
    
    .main-container {
        width: 95%;
        top: 90px;
    }
    
    .filter {
        width: 250px;
        padding: 20px;
    }
    
    th, td {
        padding: 20px 15px;
    }
}

/* å¹³æ¿è®¾å¤‡ (768px - 1023px) */
@media (min-width: 768px) and (max-width: 1023px) {
    header {
        padding: 15px 30px;
    }
    
    header ul li a {
        padding: 5px 10px;
        font-size: 0.9em;
    }
    
    .logo {
        font-size: 1.4em !important;
    }
    
    .main-container {
        width: 95%;
        top: 85px;
        flex-direction: column;
        height: auto;
    }
    
    .filter {
        position: relative;
        width: 100%;
        margin-bottom: 20px;
        top: 0;
        padding: 20px;
    }
    
    .table-container {
        width: 100%;
        max-height: 600px;
    }
    
    th, td {
        padding: 15px 10px;
        font-size: 0.9em;
    }
    
    .pagination-container {
        margin-top: 15px;
    }
    
    .language-selector {
        top: 85px;
    }
}

/* ç§»åŠ¨è®¾å¤‡ (å°äº 768px) */
@media (max-width: 767px) {
    header {
        padding: 12px 20px;
    }

    .nav-toggle {
        display: block;
    }

    .nav-menu {
        display: none;
        position: absolute;
        top: 100%;
        left: 0;
        width: 100%;
        background: rgba(43, 16, 85, 0.95);
        flex-direction: column;
        align-items: center;
        padding: 20px 0;
        z-index: 1000;
        border-radius: 0 0 10px 10px;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
    }

    .nav-menu.active {
        display: flex;
    }

    .nav-menu li {
        margin: 10px 0;
    }
    
    .nav-menu li a {
        padding: 8px 20px;
        font-size: 1em;
        border-radius: 25px;
    }
    
    .logo {
        font-size: 1.2em !important;
    }
    
    .logo-container div {
        font-size: 0.5em !important;
    }
    
    .team-link {
        font-size: 0.5em;
    }
    
    .main-container {
        width: 92%;
        top: 80px;
        flex-direction: column;
        height: auto;
        gap: 15px;
    }
    
    .filter {
        position: relative;
        width: 100%;
        margin-bottom: 15px;
        top: 0;
        padding: 15px;
    }
    
    .form-group {
        margin-bottom: 12px;
    }
    
    label {
        margin-bottom: 5px;
        font-size: 0.9em;
    }
    
    input {
        padding: 8px 15px;
        font-size: 0.9em;
    }
    
    .search-btn {
        padding: 10px 15px;
        font-size: 0.9em;
        width: 100%;
        margin-top: 10px;
    }
    
    .table-container {
        width: 100%;
        max-height: 500px;
        padding: 15px;
        overflow-x: auto;
    }
    
    table {
        min-width: 500px; /* ç¡®ä¿è¡¨æ ¼æœ‰æœ€å°å®½åº¦ï¼Œå…è®¸æ¨ªå‘æ»šåŠ¨ */
    }
    
    th, td {
        padding: 12px 8px;
        font-size: 0.85em;
    }
    
    /* ç¡®ä¿æ“ä½œåˆ—ä¸ä¼šå¤ªæŒ¤ */
    th:nth-child(4), td:nth-child(4) {
        min-width: 120px;
    }
    
    /* åœ¨ç§»åŠ¨è®¾å¤‡ä¸Šé™åˆ¶åºåˆ—åˆ—çš„å®½åº¦ */
    th:nth-child(3), td:nth-child(3) {
        max-width: 150px;
    }
    
    .view-btn {
        padding: 6px 10px;
        font-size: 0.8em;
        margin-top: 5px;
    }
    
    .pagination-container {
        margin-top: 15px;
    }
    
    .pagination-btn {
        padding: 5px 10px;
        font-size: 0.85em;
    }
    
    .page-info {
        font-size: 0.85em;
    }
    
    .language-selector {
        top: 80px;
        right: 10px;
    }
    
    .language-current {
        padding: 8px 10px;
    }
    
    .language-options {
        width: 150px;
    }
    
    .language-options a {
        padding: 8px 12px;
        font-size: 0.9em;
    }
    
    /* æœç´¢é¡µé¢ä¸“ç”¨ç§»åŠ¨ç«¯ä¼˜åŒ– */
    .main-container {
        top: 80px;
        padding-top: 20px;
    }
    
    .filter {
        border-radius: 15px;
        margin-bottom: 20px;
    }
    
    .table-container {
        border-radius: 15px;
    }
    
    /* ä¼˜åŒ–è¡¨æ ¼åœ¨ç§»åŠ¨ç«¯çš„æ˜¾ç¤º */
    table {
        border-radius: 10px;
        overflow: hidden;
    }
    
    .view-btn {
        padding: 6px 12px;
        font-size: 0.85em;
        border-radius: 15px;
        white-space: nowrap;
    }
    
    /* åˆ†é¡µæ§ä»¶ä¼˜åŒ– */
    .pagination-container {
        padding: 15px;
        display: flex;
        flex-direction: column;
        gap: 10px;
        align-items: center;
    }
    
    .pagination {
        flex-wrap: wrap;
        justify-content: center;
        gap: 5px;
    }
    
    .pagination-btn {
        min-width: 35px;
        height: 35px;
        font-size: 0.9em;
    }
}

/* è¶…å°å±å¹•è®¾å¤‡ (å°äº 480px) */
@media (max-width: 479px) {
    header {
        padding: 10px 15px;
    }
    
    .logo {
        font-size: 1em !important;
    }
    
    .logo-container div {
        font-size: 0.45em !important;
        line-height: 1.2;
    }
    
    .main-container {
        width: 95%;
        top: 75px;
        gap: 10px;
    }
    
    .filter {
        padding: 12px;
    }
    
    .table-container {
        padding: 12px;
    }
    
    th, td {
        padding: 10px 5px;
        font-size: 0.8em;
    }
    
    /* åœ¨æå°å±å¹•ä¸Šä¼˜åŒ–è¡¨æ ¼æ˜¾ç¤º */
    th:first-child, td:first-child { /* IDåˆ— */
        max-width: 70px;
        overflow: hidden;
        text-overflow: ellipsis;
    }
    
    /* è°ƒæ•´è¯­è¨€é€‰æ‹©å™¨ä½ç½® */
    .language-selector {
        top: 75px;
        right: 5px;
    }
    
    /* è¶…å°å±å¹•æœç´¢é¡µé¢ä¸“ç”¨ä¼˜åŒ– */
    .main-container {
        top: 75px;
        width: 98%;
        gap: 8px;
    }
    
    .filter {
        padding: 10px;
        border-radius: 12px;
    }
    
    .form-group {
        margin-bottom: 10px;
    }
    
    label {
        font-size: 0.85em;
    }
    
    input, select {
        padding: 8px 12px;
        font-size: 0.85em;
    }
    
    .search-btn {
        padding: 8px 12px;
        font-size: 0.85em;
    }
    
    .table-container {
        padding: 8px;
        border-radius: 12px;
    }
    
    .view-btn {
        padding: 4px 8px;
        font-size: 0.75em;
    }
    
    .pagination-btn {
        min-width: 30px;
        height: 30px;
        font-size: 0.8em;
    }
}

.main-container {
  position: relative;
  top: 100px;
  display: flex;
  gap: 30px;
  width: 90%;
  margin: 0 auto;
  flex: 1; /* æ–°å¢ */
  min-height: calc(100vh - 180px); /* æ–°å¢æœ€å°é«˜åº¦ */
  overflow: hidden;
}

    .filter {
  position: sticky;
  top: 100px;
  background: rgba(255,255,255,0.1);
  padding: 30px;
  border-radius: 20px;
  border: 1px solid rgba(43, 16, 85, 0.3);
  backdrop-filter: blur(10px);
  flex-direction: column;
  justify-content: flex-start;
  height: 100%;
}

.table-container {
  flex: 1;
  position: relative;
  overflow-y: auto;
  overflow-x: hidden;
  background: rgba(255,255,255,0.1);
  padding: 30px;
  border-radius: 20px;
  border: 1px solid rgba(43, 16, 85, 0.3);
  backdrop-filter: blur(10px);
  height: auto; /* ä¿®æ”¹ä¸ºauto */
}
footer {
  position: relative; /* ç¡®ä¿é¡µè„šå®šä½æ­£ç¡® */
  z-index: 1; /* ç¡®ä¿é¡µè„šåœ¨å†…å®¹ä¹‹ä¸Š */
  margin-top: 100px; /* æ–°å¢é—´è· */
}

    thead {
  /* æ¢å¤å›ºå®šå®šä½ */
  position: sticky;
  top: 0;
  /* æ·±ç´«è‰²çº¯è‰²èƒŒæ™¯ */
  background: rgba(43, 16, 85, 1);
  /* å¢åŠ é˜´å½±æ•ˆæœ */
  box-shadow: 0 5px 10px rgba(0, 0, 0, 0.2);
  z-index: 1;
}

    .form-group {
      margin-bottom: 20px;
      flex:1;
    }

    label {
      color:#2b1055;
      display: block;
      margin-bottom: 8px;
    }

    input {
      width: 100%;
      padding: 12px 20px;
      background: rgba(255,255,255,0.05);
      border: 2px solid rgba(43, 16, 85, 0.4); /* æ·±ç´«è‰²åŠé€æ˜ */
      border-radius: 25px;
      color: #2b1055;
      font-size: 1em;
    }

    .search-btn {
      background: #fff;
      color: #2b1055;
      font-size: large;
      padding: 15px 20px;
      border: 2px solid #a88cd4;
      border-radius: 30px;
      cursor: pointer;
      transition: 0.3s;
      margin-top: 15px;
    }

    .search-btn:hover {
      background: #a88cd4;
      ;
    }

    .view-btn:hover{
        background: #a88cd4;
    }

    .view-btn {
      background: #a88cd4;
      color: #fff;
      padding: 8px 15px;
      border: none;
      border-radius: 25px;
      cursor: pointer;
      transition: 0.3s;
      margin-top: 15px;
    }



    table {
      width: 100%;
      border-collapse: separate;
      border-spacing: 0;
      color: #2b1055;
      /* è¡¨æ ¼æ•´ä½“çš„åœ†è§’ä¸ table-container ä¿æŒä¸€è‡´ */
      border-radius: 20px;
      overflow: hidden;
    }

    th {
      padding: 25px;
      text-align: left;
      /* ä½¿è¡¨å¤´éƒ¨åˆ†ä¸ä¸‹æ–¹çš„å•å…ƒæ ¼çœ‹èµ·æ¥æ›´èåˆ */
      border-bottom: 1px solid rgba(246, 245, 247, 0.2);
      color: white; /* è¡¨å¤´æ–‡å­—ä¸ºç™½è‰² */
      background-color: #2b1055; /* å¯ä»¥è®¾ç½®è¡¨å¤´çš„èƒŒæ™¯è‰²ï¼Œç¡®ä¿ç™½è‰²å­—ä½“æ¸…æ™°å¯è§ */
    }

    td {
      padding: 25px;
  text-align: left;
      border-bottom: 1px solid rgba(43, 16, 85, 0.2);
      word-wrap: break-word;
      word-break: break-all;
      white-space: normal;
      max-width: 200px;
    }

    th:nth-child(4), td:nth-child(4) {
  white-space: nowrap;  /* æ“ä½œåˆ—ä¸æ¢è¡Œ */
  width: 120px;         /* å›ºå®šæ“ä½œåˆ—å®½åº¦ */
  text-align: center;   /* æŒ‰é’®å±…ä¸­ */
}

    /* æ»šåŠ¨æ¡æ•´ä½“æ ·å¼ */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

/* æ»šåŠ¨æ¡è½¨é“ */
::-webkit-scrollbar-track {
  background: rgba(255,255,255,0.05);
  border-radius: 10px;
}

/* æ»šåŠ¨æ¡æ»‘å— */
::-webkit-scrollbar-thumb {
  background: rgba(255,255,255,0.2);
  border-radius: 10px;
}

/* é¼ æ ‡æ‚¬åœæ—¶çš„æ»‘å— */
::-webkit-scrollbar-thumb:hover {
  background: rgba(255,255,255,0.3);
}

/* è¯­è¨€é€‰æ‹©å™¨æ ·å¼ - å¯å¤ç”¨åˆ°æ‰€æœ‰é¡µé¢ */
.language-selector {
    position: fixed;
    right: 20px;
    top: 100px; /* è°ƒæ•´åˆ°æ›´åˆé€‚çš„é«˜åº¦ */
    z-index: 10000;
}

.language-current {
    display: flex;
    align-items: center;
    padding: 10px 15px;
    cursor: pointer;
    background: rgba(43, 16, 85, 0.95);
    border-radius: 50px;
    box-shadow: 0 3px 10px rgba(0, 0, 0, 0.2);
    transition: all 0.3s cubic-bezier(0.25, 1, 0.5, 1); /* ä½¿ç”¨ç¼“åŠ¨å‡½æ•°è®©åŠ¨ç”»æ›´è‡ªç„¶ */
    overflow: hidden;
}

.language-current i {
    font-size: 18px;
    color: #fff;
    margin-right: 0; /* é»˜è®¤æ²¡æœ‰å³è¾¹è· */
    transition: margin 0.3s cubic-bezier(0.25, 1, 0.5, 1);
}

.language-current span {
    max-width: 0;
    opacity: 0;
    color: #fff;
    white-space: nowrap;
    overflow: hidden;
    transition: all 0.3s cubic-bezier(0.25, 1, 0.5, 1);
}

/* æ‚¬åœæ—¶çš„åŠ¨ç”»å˜åŒ– */
.language-selector:hover .language-current {
    padding-right: 15px;
    border-radius: 10px;
    border-bottom-left-radius: 0;
    border-bottom-right-radius: 0;
}

.language-selector:hover .language-current i {
    margin-right: 8px;
}

.language-selector:hover .language-current span {
    max-width: 120px;
    opacity: 1;
    padding-left: 5px;
}

.language-options {
    display: none;
    position: absolute;
    top: 100%;
    right: 0;
    background: rgba(43, 16, 85, 0.95);
    border-radius: 10px;
    border-top-right-radius: 0;
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
    width: 180px;
    max-height: 350px;
    overflow-y: auto;
    transform: translateY(-10px);
    opacity: 0;
    transition: all 0.3s cubic-bezier(0.25, 1, 0.5, 1);
}

.language-selector:hover .language-options {
    display: block;
    transform: translateY(0);
    opacity: 1;
    animation: fadeDown 0.3s cubic-bezier(0.25, 1, 0.5, 1);
}

@keyframes fadeDown {
    from {
        transform: translateY(-10px);
        opacity: 0;
    }
    to {
        transform: translateY(0);
        opacity: 1;
    }
}

.language-options a {
    display: block;
    padding: 10px 15px;
    color:#ffffff;
    text-decoration: none;
    transition: background 0.2s ease;
    border-radius: 5px;
    margin: 5px;
}

.language-options a:hover {
    background:rgba(255,255,255,0.1);
}

/* ä¸ºæœ€åä¸€ä¸ªå…ƒç´ æ·»åŠ åœ†è§’ */
.language-options a:last-child {
    margin-bottom: 10px;
}

/* ä¸ºç¬¬ä¸€ä¸ªå…ƒç´ æ·»åŠ é¡¶éƒ¨é—´è· */
.language-options a:first-child {
    margin-top: 10px;
}

/* è‡ªå®šä¹‰æ»šåŠ¨æ¡æ ·å¼ */
.language-options::-webkit-scrollbar {
    width: 5px;
}

.language-options::-webkit-scrollbar-track {
    background: rgba(255,255,255,0.1);
}

.language-options::-webkit-scrollbar-thumb {
    background: rgba(255, 255, 255, 0.3);
    border-radius: 5px;
}

/* åˆ†é¡µæ§ä»¶æ ·å¼ */
.pagination-container {
    display: flex;
    justify-content: center;
    align-items: center;
    margin-top: 25px;
    padding: 10px 0;
    border-top: 1px solid rgba(255,255,255,0.1);
}

.pagination-btn {
    background: rgba(255,255,255,0.1);
    color: #2b1055;
    border: 1px solid rgba(255,255,255,0.3);
    padding: 8px 15px;
    margin: 0 5px;
    border-radius: 20px;
    cursor: pointer;
    transition: background 0.3s;
}

.pagination-btn:hover:not(:disabled) {
    background: rgba(255,255,255,0.2);
}

.pagination-btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
}

.page-info {
    color: #2b1055;
    margin: 0 15px;
    font-size: 0.9em;
}

/* ä¸ºè¡¨å¤´çš„ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªå•å…ƒæ ¼æ·»åŠ åœ†è§’ */
thead th:first-child {
  border-top-left-radius: 20px;
}

thead th:last-child {
  border-top-right-radius: 20px;
}

/* æ·»åŠ æœç´¢æŒ‰é’®åŠ¨ç”»æ ·å¼ */
.search-btn.searching {
    animation: search-pulse 0.6s cubic-bezier(0.4, 0, 0.6, 1);
    background-color: #7597de;
}

@keyframes search-pulse {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.05); }
}

/* æ·»åŠ è¾“å…¥æ¡†èšç„¦æ ·å¼å¢å¼º */
.form-group input:focus {
    outline: none;
    border-color: var(--secondary-color, #7597de);
    box-shadow: 0 0 0 3px rgba(117, 151, 222, 0.2);
    transition: all 0.3s ease;
}

/* æ·»åŠ æœç´¢ç»“æœåŠ è½½åŠ¨ç”» */
#loading-indicator td {
    position: relative;
}

#loading-indicator td::after {
    content: '';
    display: inline-block;
    width: 20px;
    height: 20px;
    margin-left: 10px;
    border: 2px solid rgba(43, 16, 85, 0.2);
    border-top-color: #2b1055;
    border-radius: 50%;
    animation: spinner 1s linear infinite;
    vertical-align: middle;
}

@keyframes spinner {
    to { transform: rotate(360deg); }
}

    /* ç§»åŠ¨ç«¯æ¨ªå±æç¤ºå¼¹çª—æ ·å¼ */
    .orientation-modal {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(43, 16, 85, 0.95);
        backdrop-filter: blur(10px);
        z-index: 10001;
        display: none;
        justify-content: center;
        align-items: center;
        color: white;
        font-family: inherit;
    }
    
    .orientation-modal.show {
        display: flex;
        animation: fadeIn 0.5s ease;
    }
    
    .orientation-content {
        text-align: center;
        padding: 40px 30px;
        max-width: 350px;
        background: rgba(255, 255, 255, 0.1);
        border-radius: 20px;
        border: 1px solid rgba(255, 255, 255, 0.2);
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        position: relative;
        overflow: hidden;
    }
    
    .orientation-content::before {
        content: \'\';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(45deg, rgba(117, 151, 222, 0.1), rgba(80, 226, 194, 0.1));
        pointer-events: none;
    }
    
    .phone-animation {
        width: 80px;
        height: 140px;
        margin: 0 auto 30px;
        position: relative;
        animation: floatPhone 3s ease-in-out infinite;
    }
    
    .phone-frame {
        width: 100%;
        height: 100%;
        border: 3px solid #fff;
        border-radius: 15px;
        position: relative;
        background: linear-gradient(135deg, #7597de, #2b1055);
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        transform-origin: center center;
        animation: rotatePhone 3s ease-in-out infinite;
    }
    
    .phone-screen {
        position: absolute;
        top: 8px;
        left: 8px;
        right: 8px;
        bottom: 8px;
        background: #000;
        border-radius: 8px;
        overflow: hidden;
    }
    
    .phone-content {
        width: 100%;
        height: 100%;
        background: linear-gradient(45deg, #2b1055, #7597de);
        position: relative;
    }
    
    .phone-content::after {
        content: \'SPADE\';
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        color: #fff;
        font-size: 8px;
        font-weight: bold;
    }
    
    .rotate-arrow {
        position: absolute;
        right: -20px;
        top: 50%;
        transform: translateY(-50%);
        width: 30px;
        height: 30px;
        animation: pulseArrow 2s ease-in-out infinite;
    }
    
    .rotate-arrow::before {
        content: \'â†»\';
        font-size: 24px;
        color: #50e2c2;
        display: block;
        animation: spinArrow 2s linear infinite;
    }
    
    .orientation-title {
        font-size: 1.4rem;
        font-weight: 600;
        margin-bottom: 15px;
        background: linear-gradient(90deg, #7597de, #50e2c2);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        position: relative;
        z-index: 1;
    }
    
    .orientation-message {
        font-size: 1rem;
        line-height: 1.6;
        color: rgba(255, 255, 255, 0.9);
        margin-bottom: 25px;
        position: relative;
        z-index: 1;
    }
    
    .orientation-tip {
        font-size: 0.85rem;
        color: rgba(255, 255, 255, 0.7);
        border-top: 1px solid rgba(255, 255, 255, 0.1);
        padding-top: 20px;
        position: relative;
        z-index: 1;
    }
    
    .tip-icon {
        display: inline-block;
        margin-right: 8px;
        animation: bounce 2s ease-in-out infinite;
    }
    
    .orientation-close-btn {
        margin-top: 20px;
        padding: 10px 20px;
        background: rgba(255, 255, 255, 0.1);
        border: 1px solid rgba(255, 255, 255, 0.2);
        border-radius: 25px;
        color: rgba(255, 255, 255, 0.8);
        font-size: 0.9rem;
        cursor: pointer;
        transition: all 0.3s ease;
        position: relative;
        z-index: 1;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 8px;
    }
    
    .orientation-close-btn:hover {
        background: rgba(255, 255, 255, 0.2);
        color: white;
        transform: translateY(-2px);
    }
    
    .orientation-close-btn i {
        font-size: 0.8rem;
    }
    
    /* åŠ¨ç”»å®šä¹‰ */
    @keyframes fadeIn {
        from {
            opacity: 0;
            transform: scale(0.9);
        }
        to {
            opacity: 1;
            transform: scale(1);
        }
    }
    
    @keyframes floatPhone {
        0%, 100% {
            transform: translateY(0);
        }
        50% {
            transform: translateY(-10px);
        }
    }
    
    @keyframes rotatePhone {
        0% {
            transform: rotate(0deg);
        }
        25% {
            transform: rotate(-5deg);
        }
        50% {
            transform: rotate(90deg);
        }
        75% {
            transform: rotate(85deg);
        }
        100% {
            transform: rotate(90deg);
        }
    }
    
    @keyframes pulseArrow {
        0%, 100% {
            transform: translateY(-50%) scale(1);
            opacity: 1;
        }
        50% {
            transform: translateY(-50%) scale(1.2);
            opacity: 0.8;
        }
    }
    
    @keyframes spinArrow {
        from {
            transform: rotate(0deg);
        }
        to {
            transform: rotate(360deg);
        }
    }
    
    @keyframes bounce {
        0%, 20%, 50%, 80%, 100% {
            transform: translateY(0);
        }
        40% {
            transform: translateY(-8px);
        }
        60% {
            transform: translateY(-4px);
        }
    }
    
    /* æ¨ªå±çŠ¶æ€ä¸‹éšè—å¼¹çª— */
    @media screen and (orientation: landscape) and (max-width: 1024px) {
        .orientation-modal {
            display: none !important;
        }
    }
    
    /* å¹³æ¿æ¨ªå±ä¼˜åŒ– */
    @media screen and (orientation: landscape) and (min-width: 768px) and (max-width: 1024px) {
        .orientation-modal {
            display: none !important;
        }
    }
    
    /* å°å±å¹•è®¾å¤‡ç‰¹æ®Šå¤„ç† */
    @media screen and (max-width: 480px) {
        .orientation-content {
            max-width: 300px;
            padding: 30px 25px;
        }
        
        .orientation-title {
            font-size: 1.2rem;
        }
        
        .orientation-message {
            font-size: 0.9rem;
        }
        
        .phone-animation {
            width: 70px;
            height: 120px;
        }
    }
    
    /* ç¡®ä¿å¼¹çª—åœ¨æ‰€æœ‰å…¶ä»–å…ƒç´ ä¹‹ä¸Š */
    .orientation-modal {
        z-index: 10001 !important;
    }
    
    /* ä¸ºå¼¹çª—æ·»åŠ æ›´å¤šè§†è§‰æ•ˆæœ */
    .orientation-content {
        animation: modalSlideIn 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
    }
    
    @keyframes modalSlideIn {
        0% {
            opacity: 0;
            transform: translateY(30px) scale(0.9);
        }
        100% {
            opacity: 1;
            transform: translateY(0) scale(1);
        }
    }
    
    /* æ·»åŠ è„‰å†²å…‰æ•ˆ */
    .orientation-content::after {
        content: \'\';
        position: absolute;
        top: -2px;
        left: -2px;
        right: -2px;
        bottom: -2px;
        border-radius: 22px;
        background: linear-gradient(45deg, 
            rgba(117, 151, 222, 0.3), 
            rgba(80, 226, 194, 0.3), 
            rgba(117, 151, 222, 0.3)
        );
        z-index: -1;
        animation: borderPulse 3s ease-in-out infinite;
    }
    
    @keyframes borderPulse {
        0%, 100% {
            opacity: 0.3;
            transform: scale(1);
        }
        50% {
            opacity: 0.6;
            transform: scale(1.02);
        }
    }
  </style>
</head>

<body class="other-page">
  <!-- ç§»åŠ¨ç«¯æ¨ªå±æç¤ºå¼¹çª— -->
  <div class="orientation-modal" id="orientationModal">
      <div class="orientation-content">
          <div class="phone-animation">
              <div class="phone-frame">
                  <div class="phone-screen">
                      <div class="phone-content"></div>
                  </div>
              </div>
              <div class="rotate-arrow"></div>
          </div>
          <h3 class="orientation-title">Better Experience</h3>
          <p class="orientation-message">
              For the best browsing experience, we recommend using SPADE database in <strong>landscape</strong> mode.
          </p>
          <div class="orientation-tip">
              <span class="tip-icon">ğŸ’¡</span>
              In landscape mode, you can better view data tables, charts and research content
          </div>
          <button class="orientation-close-btn" id="orientationCloseBtn" style="display: none;">
              <i class="fas fa-times"></i>
              <span>Continue anyway</span>
          </button>
      </div>
  </div>

  <header>
    <div class="logo-container">
      <a href="#" class="logo">
        <img src="../icon/logo.png"  style="vertical-align: middle; height: 30px;">
        SPADE
      </a>
      <div style="color: white; font-size: 0.6em;">System for Antimicrobial Peptide<br>Management and Database</div>
      <!-- <a href="https://2025.igem.wiki/xjtlu - software" class="team-link" target="_blank" rel="noopener noreferrer">Belongs to 2025-XJTLU-Software</a> -->
    </div>
    <button class="nav-toggle" aria-label="Toggle navigation">
      <i class="fas fa-bars"></i>
    </button>
    <ul class="nav-menu">
      <li><a href="home.html">Home</a></li>
      <li><a href="search.html" class="active">Search</a></li>
      <li><a href="tools.html">Tools</a></li>
      <li><a href="statistics.html">Statistics</a></li>
      <!-- <li><a href="chat.html">Chat</a></li> -->
      <!-- <li><a href="login.html">Login</a></li> -->
    </ul>
  </header>

  <!-- æ–°çš„ä¾§è¾¹è¯­è¨€é€‰æ‹©å™¨UI -->
  <div class="language-selector">
    <div class="language-current" id="currentLang">
      <i class="fas fa-globe"></i>
      <span id="currentLangText">ä¸­æ–‡ (ç®€ä½“)</span>
    </div>
    <div class="language-options">
      <a href="#" data-lang="en" class="no-translate">English</a>
      <a href="#" data-lang="zh-Hans" class="no-translate">ä¸­æ–‡ (ç®€ä½“)</a>
      <a href="#" data-lang="zh-Hant" class="no-translate">ç¹é«”ä¸­æ–‡</a>
      <a href="#" data-lang="ja" class="no-translate">æ—¥æœ¬èª</a>
      <a href="#" data-lang="ko" class="no-translate">í•œêµ­ì–´</a>
      <a href="#" data-lang="fr" class="no-translate">FranÃ§ais</a>
      <a href="#" data-lang="de" class="no-translate">Deutsch</a>
      <a href="#" data-lang="es" class="no-translate">EspaÃ±ol</a>
      <a href="#" data-lang="ru" class="no-translate">Ğ ÑƒÑÑĞºĞ¸Ğ¹</a>
    </div>
  </div>

  <div class="main-container">
    <div class="filter">
      <div class="form-group">
        <label>ID</label>
        <input type="text" id="idInput" placeholder="Input ID">
      </div>
      <div class="form-group">
        <label>Name</label>
        <input type="text" id="nameInput" placeholder="Input Name">
      </div>
      <div class="form-group">
        <label>Sequence</label>
        <input type="text" id="sequenceInput" placeholder="Input Sequence">
      </div>
      <div class="form-group">
        <label>Sequence Length</label>
        <input type="text" id="lengthInput" placeholder="For example: 10-50">
      </div>
      <button class="search-btn" onclick="search()">Search</button>
      <button class="search-btn" onclick="exportCSV()">Export CSV</button>
      <button class="search-btn" id="resetSearchBtn" style="display: none; background-color: #6c757d;">Clear Search</button>
    </div>
    <div class="table-container">
      <table id="resultsTable">
        <thead>
          <tr>
            <th>ID</th>
            <th>Name</th>
            <th>Sequence</th>
            <th>Action</th>
          </tr>
        </thead>
        <tbody id="table-body">
          <!-- åŠ¨æ€ç”Ÿæˆçš„è¡¨æ ¼è¡Œå°†æ’å…¥è¿™é‡Œ -->
        </tbody>
      </table>
      <!-- åˆ†é¡µæ§ä»¶ -->
      <div class="pagination-container">
        <button id="prevPageBtn" class="pagination-btn" disabled>Previous</button>
        <span id="pageInfo" class="page-info">Page 1 of 1</span>
        <button id="nextPageBtn" class="pagination-btn" disabled>Next</button>
      </div>
    </div>
  </div>

  <script>
    const navToggle = document.querySelector('.nav-toggle');
    const navMenu = document.querySelector('.nav-menu');
    const itemsPerPage = 15; // æ¯é¡µæ˜¾ç¤ºæ¡æ•°
    let currentPage = 1;
    let totalPages = 1;
    let allPeptideFiles = []; // å­˜å‚¨æ‰€æœ‰æ–‡ä»¶å
    let peptideIndexData = []; // å­˜å‚¨ç´¢å¼•æ–‡ä»¶æ•°æ®
    let currentFilterFiles = []; // å­˜å‚¨å½“å‰è¿‡æ»¤åçš„æ–‡ä»¶ååˆ—è¡¨
    let isFiltered = false; // æ ‡è®°å½“å‰æ˜¯å¦å¤„äºè¿‡æ»¤çŠ¶æ€
    
    // æ·»åŠ æ•°æ®ç¼“å­˜
    const dataCache = new Map(); // ç”¨äºç¼“å­˜å·²åŠ è½½çš„JSONæ•°æ®
    const CACHE_EXPIRY = 5 * 60 * 1000; // ç¼“å­˜è¿‡æœŸæ—¶é—´ï¼š5åˆ†é’Ÿ
    const BATCH_SIZE = 5; // æ‰¹é‡åŠ è½½å¤§å°ï¼Œæ¯æ‰¹åŠ è½½5ä¸ªæ–‡ä»¶
    
    // IndexedDBæŒä¹…åŒ–å­˜å‚¨é…ç½®
    const DB_NAME = 'peptideDB';
    const DB_VERSION = 1;
    const STORE_NAME = 'peptideCache';
    let db = null; // æ•°æ®åº“è¿æ¥å¯¹è±¡
    const INDEXED_DB_EXPIRY = 7 * 24 * 60 * 60 * 1000; // æŒä¹…ç¼“å­˜è¿‡æœŸæ—¶é—´ï¼š7å¤©
    
    // é¢„åŠ è½½æ§åˆ¶
    let isPreloading = false; // æ ‡è®°æ˜¯å¦æ­£åœ¨é¢„åŠ è½½
    let preloadTimer = null; // é¢„åŠ è½½å®šæ—¶å™¨
    
    // å¯¼èˆªåˆ‡æ¢åŠŸèƒ½
    if (navToggle && navMenu) {
        navToggle.addEventListener('click', () => {
            navMenu.classList.toggle('active');
        });
        
        // ç‚¹å‡»èœå•é¡¹åå…³é—­èœå•
        const navLinks = document.querySelectorAll('.nav-menu a');
        navLinks.forEach(link => {
            link.addEventListener('click', () => {
                navMenu.classList.remove('active');
            });
        });
        
        // ç‚¹å‡»é¡µé¢å…¶ä»–åœ°æ–¹å…³é—­èœå•
        document.addEventListener('click', (e) => {
            if (!navToggle.contains(e.target) && !navMenu.contains(e.target)) {
                navMenu.classList.remove('active');
            }
        });
    }

    // åœ¨é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–æ•°æ®
    document.addEventListener('DOMContentLoaded', () => {
      // åˆå§‹åŒ–ç§»åŠ¨ç«¯æ¨ªå±æç¤º
      initOrientationModal();

      // åˆå§‹åŒ–IndexedDB
      initIndexedDB().then(() => {
        // åŠ è½½æ•°æ®...
        loadInitialData().then(() => {
          // æ•°æ®åŠ è½½å®Œæˆåå¤„ç†URLå‚æ•°
          processUrlParameters();
        });
      }).catch(err => {
        console.error('IndexedDBåˆå§‹åŒ–å¤±è´¥:', err);
        // å³ä½¿IndexedDBå¤±è´¥ï¼Œä¹Ÿç»§ç»­åŠ è½½æ•°æ®
        loadInitialData().then(() => {
          processUrlParameters();
        });
      });
      
      // åœ¨é¡µé¢å¸è½½å‰æ¸…ç†ç¼“å­˜ï¼Œé‡Šæ”¾å†…å­˜
      window.addEventListener('beforeunload', function() {
        clearCache();
        clearTimeout(preloadTimer); // æ¸…ç†é¢„åŠ è½½å®šæ—¶å™¨
      });
      
    // å¯¼èˆªäº¤äº’
    document.querySelectorAll('header ul li').forEach(li => {
      li.addEventListener('click', function() {
        document.querySelectorAll('header ul li').forEach(item => 
          item.classList.remove('active'));
        this.classList.add('active');
      });
    });

    // ç‚¹å‡»å¤–éƒ¨å…³é—­å¼¹çª—
    window.onclick = function(event) {
      if (event.target == document.getElementById('detailModal')) {
        closeModal();
      }
    }

      // å¦‚æœå…¨å±€ç‰¹æ®Šè¯æ±‡é…ç½®ä¸å­˜åœ¨ï¼Œåˆ™åˆ›å»ºå®Œæ•´çš„æœç´¢é¡µé¢ç¿»è¯‘å­—å…¸
      if (!window.specialTerms) {
        window.specialTerms = {
          'en': {
            'SPADE': 'SPADE',
            'System for Antimicrobial Peptide Management and Database': 'System for Antimicrobial Peptide Management and Database',
            'Home': 'Home',
            'Search': 'Search',
            'Tools': 'Tools',
            'Statistics': 'Statistics',
            'ID': 'ID',
            'Name': 'Name',
            'Sequence': 'Sequence',
            'Action': 'Action',
            'View': 'View',
            'Visualize': 'Visualize',
            'Input ID': 'Input ID',
            'Input Name': 'Input Name',
            'Input Sequence': 'Input Sequence',
            'Sequence Length': 'Sequence Length',
            'For example: 10-50': 'For example: 10-50',
            'Export CSV': 'Export CSV',
            'Clear Search': 'Clear Search',
            'Previous': 'Previous',
            'Next': 'Next',
            'Page': 'Page',
            'of': 'of',
            'No results found': 'No results found',
            'Loading...': 'Loading...',
            'Error loading data': 'Error loading data',
            'AMP Visualization': 'AMP Visualization'
          },
          'zh-Hans': {
            'SPADE': 'SPADE',
            'System for Antimicrobial Peptide Management and Database': 'æŠ—èŒè‚½ç®¡ç†å’Œæ•°æ®åº“ç³»ç»Ÿ',
            'Home': 'é¦–é¡µ',
            'Search': 'æœç´¢',
            'Tools': 'å·¥å…·',
            'Statistics': 'ç»Ÿè®¡',
            'ID': 'ID',
            'Name': 'åç§°',
            'Sequence': 'åºåˆ—',
            'Action': 'æ“ä½œ',
            'View': 'æŸ¥çœ‹',
            'Visualize': 'å¯è§†åŒ–',
            'Input ID': 'è¾“å…¥ID',
            'Input Name': 'è¾“å…¥åç§°',
            'Input Sequence': 'è¾“å…¥åºåˆ—',
            'Sequence Length': 'åºåˆ—é•¿åº¦',
            'For example: 10-50': 'ä¾‹å¦‚ï¼š10-50',
            'Export CSV': 'å¯¼å‡ºCSV',
            'Clear Search': 'æ¸…ç©ºæœç´¢',
            'Previous': 'ä¸Šä¸€é¡µ',
            'Next': 'ä¸‹ä¸€é¡µ',
            'Page': 'ç¬¬',
            'of': 'é¡µï¼Œå…±',
            'No results found': 'æœªæ‰¾åˆ°ç»“æœ',
            'Loading...': 'åŠ è½½ä¸­...',
            'Error loading data': 'æ•°æ®åŠ è½½é”™è¯¯',
            'AMP Visualization': 'æŠ—èŒè‚½å¯è§†åŒ–'
          },
          'zh-Hant': {
            'SPADE': 'SPADE',
            'System for Antimicrobial Peptide Management and Database': 'æŠ—èŒè‚½ç®¡ç†å’Œè³‡æ–™åº«ç³»çµ±',
            'Home': 'é¦–é ',
            'Search': 'æœå°‹',
            'Tools': 'å·¥å…·',
            'Statistics': 'çµ±è¨ˆ',
            'ID': 'ID',
            'Name': 'åç¨±',
            'Sequence': 'åºåˆ—',
            'Action': 'æ“ä½œ',
            'View': 'æŸ¥çœ‹',
            'Visualize': 'å¯è¦–åŒ–',
            'Input ID': 'è¼¸å…¥ID',
            'Input Name': 'è¼¸å…¥åç¨±',
            'Input Sequence': 'è¼¸å…¥åºåˆ—',
            'Sequence Length': 'åºåˆ—é•·åº¦',
            'For example: 10-50': 'ä¾‹å¦‚ï¼š10-50',
            'Export CSV': 'å°å‡ºCSV',
            'Clear Search': 'æ¸…ç©ºæœå°‹',
            'Previous': 'ä¸Šä¸€é ',
            'Next': 'ä¸‹ä¸€é ',
            'Page': 'ç¬¬',
            'of': 'é ï¼Œå…±',
            'No results found': 'æœªæ‰¾åˆ°çµæœ',
            'Loading...': 'åŠ è¼‰ä¸­...',
            'Error loading data': 'æ•¸æ“šåŠ è¼‰éŒ¯èª¤',
            'AMP Visualization': 'æŠ—èŒè‚½å¯è¦–åŒ–'
          },
          'es': {
            'SPADE': 'SPADE',
            'System for Antimicrobial Peptide Management and Database': 'Sistema de GestiÃ³n y Base de Datos de PÃ©ptidos Antimicrobianos',
            'Home': 'Inicio',
            'Search': 'Buscar',
            'Tools': 'Herramientas',
            'Statistics': 'EstadÃ­sticas',
            'ID': 'ID',
            'Name': 'Nombre',
            'Sequence': 'Secuencia',
            'Action': 'AcciÃ³n',
            'View': 'Ver',
            'Visualize': 'Visualizar',
            'Input ID': 'Ingrese ID',
            'Input Name': 'Ingrese Nombre',
            'Input Sequence': 'Ingrese Secuencia',
            'Sequence Length': 'Longitud de Secuencia',
            'For example: 10-50': 'Por ejemplo: 10-50',
            'Export CSV': 'Exportar CSV',
            'Clear Search': 'Limpiar BÃºsqueda',
            'Previous': 'Anterior',
            'Next': 'Siguiente',
            'Page': 'PÃ¡gina',
            'of': 'de',
            'No results found': 'No se encontraron resultados',
            'Loading...': 'Cargando...',
            'Error loading data': 'Error al cargar datos',
            'AMP Visualization': 'VisualizaciÃ³n AMP'
          },
          'ja': {
            'SPADE': 'SPADE',
            'System for Antimicrobial Peptide Management and Database': 'æŠ—èŒãƒšãƒ—ãƒãƒ‰ç®¡ç†ãƒ»ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚·ã‚¹ãƒ†ãƒ ',
            'Home': 'ãƒ›ãƒ¼ãƒ ',
            'Search': 'æ¤œç´¢',
            'Tools': 'ãƒ„ãƒ¼ãƒ«',
            'Statistics': 'çµ±è¨ˆ',
            'ID': 'ID',
            'Name': 'åå‰',
            'Sequence': 'é…åˆ—',
            'Action': 'æ“ä½œ',
            'View': 'è¡¨ç¤º',
            'Visualize': 'å¯è¦–åŒ–',
            'Input ID': 'IDã‚’å…¥åŠ›',
            'Input Name': 'åå‰ã‚’å…¥åŠ›',
            'Input Sequence': 'é…åˆ—ã‚’å…¥åŠ›',
            'Sequence Length': 'é…åˆ—ã®é•·ã•',
            'For example: 10-50': 'ä¾‹ï¼š10-50',
            'Export CSV': 'CSVã‚’ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ',
            'Clear Search': 'æ¤œç´¢ã‚’ã‚¯ãƒªã‚¢',
            'Previous': 'å‰ã¸',
            'Next': 'æ¬¡ã¸',
            'Page': 'ãƒšãƒ¼ã‚¸',
            'of': '/',
            'No results found': 'çµæœãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“',
            'Loading...': 'èª­ã¿è¾¼ã¿ä¸­...',
            'Error loading data': 'ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼',
            'AMP Visualization': 'æŠ—èŒãƒšãƒ—ãƒãƒ‰å¯è¦–åŒ–'
          }
        };
      }
      
      const savedLang = getLanguagePreference();
      document.documentElement.lang = savedLang;
      
      // æ›´æ–°å½“å‰è¯­è¨€æ˜¾ç¤º - ç¡®ä¿ä¸ç¿»è¯‘è¯­è¨€åç§°
      updateCurrentLanguageDisplay();
      
      // åˆå§‹åŒ–å¤šè¯­è¨€é€‰æ‹©ä¸‹æ‹‰èœå•äº‹ä»¶
      const langOptions = document.querySelectorAll('.language-options a');
      langOptions.forEach(option => {
        option.addEventListener('click', function(e) {
          e.preventDefault();
          const newLang = this.getAttribute('data-lang');
          if (newLang === document.documentElement.lang) return;
          
          // ä¿å­˜è¯­è¨€è®¾ç½®å¹¶åˆ·æ–°é¡µé¢
          saveLanguagePreference(newLang);
          
          // è·å–å½“å‰URLå¹¶æ·»åŠ æ—¶é—´æˆ³å‚æ•°ä»¥ç¡®ä¿åˆ·æ–°
          const currentUrl = new URL(window.location.href);
          currentUrl.searchParams.set('ts', Date.now());
          window.location.href = currentUrl.toString();
        });
      });
      
      // åˆå§‹åŒ–ç¿»è¯‘
      initializeTranslation(savedLang);
    });
    
    // åˆå§‹åŒ–ç¿»è¯‘å‡½æ•°
    function initializeTranslation(lang) {
      const tranzy = new Tranzy.Translator({
        toLang: lang,
        fromLang: 'en',
        ignore: ['.no-translate', 'input', 'select', '.search-icon', 'textarea', '.language-dropdown a'],
        manualDict: window.specialTerms
      });
      
      tranzy.translatePage();
      tranzy.startObserver();
      
      // å°†ç¿»è¯‘å®ä¾‹ä¿å­˜åˆ°å…¨å±€å˜é‡ï¼Œä»¥ä¾¿ä¹‹åé”€æ¯
      window.tranzyInstance = tranzy;
    }

    // æä¾›ä¸€ä¸ªå…¨å±€å‡½æ•°ç”¨äºåŠ¨æ€æ·»åŠ æˆ–ä¿®æ”¹ç‰¹æ®Šåè¯ï¼ˆå¦‚æœæ²¡æœ‰åœ¨home.htmlä¸­å®šä¹‰ï¼‰
    if (!window.updateSpecialTerm) {
      window.updateSpecialTerm = function(term, translation, language) {
        language = language || document.documentElement.lang;
        if (!window.specialTerms[language]) {
          window.specialTerms[language] = {};
        }
        window.specialTerms[language][term] = translation;
        
        // å¦‚æœå½“å‰è¯­è¨€åŒ¹é…ï¼Œç«‹å³åº”ç”¨æ›´æ–°
        if (language === document.documentElement.lang && window.tranzyInstance) {
          window.tranzyInstance.destroy();
          initializeTranslation(language);
        }
      };
    }

    function search() {
      const idInput = document.getElementById("idInput").value.trim();
      const nameInput = document.getElementById("nameInput").value.trim();
      const sequenceInput = document.getElementById("sequenceInput").value.trim();
      const lengthInput = document.getElementById("lengthInput").value.trim();

      // ä¼˜å…ˆå¤„ç†IDæœç´¢ - ä¿®æ”¹ä¸ºä¸åŒºåˆ†å¤§å°å†™
      if (idInput) {
          // æ£€æŸ¥æ˜¯å¦èƒ½åœ¨æ–‡ä»¶åˆ—è¡¨ä¸­æ‰¾åˆ°ä¸åŒºåˆ†å¤§å°å†™çš„åŒ¹é…é¡¹
          const matchID = idInput.toUpperCase().replace(/\s+/g, ''); // è½¬ä¸ºå¤§å†™å¹¶ç§»é™¤ç©ºæ ¼
          
          // æŸ¥æ‰¾åŒ¹é…çš„æ–‡ä»¶
          const matchedFile = allPeptideFiles.find(file => 
              file.toUpperCase().replace(/\.json$/i, '') === matchID ||   // ç²¾ç¡®åŒ¹é…ï¼ˆä¸å¸¦æ‰©å±•åï¼‰
              file.toUpperCase().includes(matchID));                      // åŒ…å«åŒ¹é…
          
          if (matchedFile) {
              // å¦‚æœæ‰¾åˆ°åŒ¹é…ï¼Œæå–å®é™…IDï¼ˆç§»é™¤æ‰©å±•åï¼‰
              const actualID = matchedFile.replace(/\.json$/i, '');
              const encodedID = encodeURIComponent(actualID);
              window.location.href = `peptide_card.html?DRAMP ID=${encodedID}`;
              return;
          } else {
              // å¦‚æœåœ¨æ–‡ä»¶åˆ—è¡¨ä¸­æ‰¾ä¸åˆ°ï¼Œå°è¯•åŸæ–¹å¼ç›´æ¥æœç´¢
              const encodedID = encodeURIComponent(idInput);
              window.location.href = `peptide_card.html?DRAMP ID=${encodedID}`;
              return;
          }
      }

      // å¦‚æœæ²¡æœ‰ç´¢å¼•æ•°æ®ï¼Œæ— æ³•è¿›è¡Œé«˜çº§æœç´¢
      if (peptideIndexData.length === 0 && (nameInput || sequenceInput || lengthInput)) {
          alert('æœç´¢ç´¢å¼•æœªåŠ è½½ï¼Œæ— æ³•æŒ‰åç§°ã€åºåˆ—æˆ–é•¿åº¦æœç´¢ã€‚è¯·å°è¯•ä½¿ç”¨ ID æœç´¢ã€‚');
          return;
      }
      
      let results = [...peptideIndexData]; // ä»å®Œæ•´ç´¢å¼•å¼€å§‹è¿‡æ»¤
      let didFilter = false;

      // æŒ‰åç§°è¿‡æ»¤
      if (nameInput) {
          results = results.filter(p => p.name && p.name.toLowerCase().includes(nameInput.toLowerCase()));
          didFilter = true;
      }

      // æŒ‰åºåˆ—è¿‡æ»¤
      if (sequenceInput) {
          results = results.filter(p => p.sequence && p.sequence.toLowerCase().includes(sequenceInput.toLowerCase()));
          didFilter = true;
      }

      // æŒ‰é•¿åº¦è¿‡æ»¤
      if (lengthInput) {
          const rangeMatch = lengthInput.match(/^(\d+)-(\d+)$/);
          if (rangeMatch) {
              const minLength = parseInt(rangeMatch[1], 10);
              const maxLength = parseInt(rangeMatch[2], 10);
              results = results.filter(p => p.length >= minLength && p.length <= maxLength);
              didFilter = true;
          } else {
              alert("åºåˆ—é•¿åº¦æ ¼å¼ä¸æ­£ç¡®ï¼Œè¯·è¾“å…¥èŒƒå›´ï¼Œä¾‹å¦‚ï¼š10-50");
              return; // æ ¼å¼é”™è¯¯åˆ™åœæ­¢æœç´¢
          }
      }

      // å¦‚æœæ²¡æœ‰è¾“å…¥ä»»ä½•è¿‡æ»¤æ¡ä»¶ï¼Œåˆ™ä¸æ‰§è¡Œæ“ä½œï¼ˆé¿å…æ˜¾ç¤ºç©ºç»“æœï¼‰
      if (!didFilter) {
          // å¯ä»¥é€‰æ‹©é‡ç½®æ˜¾ç¤ºæ‰€æœ‰æ•°æ®ï¼Œæˆ–è€…æç¤ºç”¨æˆ·è¾“å…¥æ¡ä»¶
          // alert("è¯·è¾“å…¥è‡³å°‘ä¸€ä¸ªæœç´¢æ¡ä»¶ï¼ˆåç§°ã€åºåˆ—æˆ–é•¿åº¦ï¼‰ã€‚");
          // æˆ–è€…é‡ç½®
          isFiltered = false;
          currentFilterFiles = [...allPeptideFiles];
          displayPage(1);
          return;
      }

      // æ›´æ–°è¿‡æ»¤çŠ¶æ€å’Œæ–‡ä»¶åˆ—è¡¨
      isFiltered = true;
      currentFilterFiles = results.map(p => `${p.id}.json`); // ä»ç»“æœä¸­è·å–å¯¹åº”çš„æ–‡ä»¶å
      
      console.log(`æœç´¢å®Œæˆï¼Œæ‰¾åˆ° ${currentFilterFiles.length} ä¸ªç»“æœã€‚`);

      // æ˜¾ç¤ºæœç´¢ç»“æœçš„ç¬¬ä¸€é¡µ
      displayPage(1);

      // --- ç§»é™¤æ—§çš„åŸºäºå½“å‰é¡µçš„æœç´¢é€»è¾‘ --- 
      /* 
      if (nameInput) { ... }
      if (sequenceInput) { ... }
      if (lengthInput) { ... }
      alert("è¯·è¾“å…¥ IDã€åç§°ã€åºåˆ—æˆ–é•¿åº¦èŒƒå›´è¿›è¡Œæœç´¢");
      */
     }

    function exportCSV() {
      // å¯¼å‡º CSV åŠŸèƒ½å®ç°
    }

    // åŠ è½½åˆå§‹æ•°æ®ï¼ˆæ–‡ä»¶ååˆ—è¡¨å’Œç´¢å¼•ï¼‰ï¼Œå¹¶æ˜¾ç¤ºç¬¬ä¸€é¡µ
    async function loadInitialData() {
        console.log("å¼€å§‹åŠ è½½åˆå§‹æ•°æ®...");
        
        // ç›´æ¥ä½¿ç”¨ç‰¹å®šè·¯å¾„åŠ è½½ç´¢å¼•æ–‡ä»¶
        const indexPath = './IndexJs/peptide_index.json';
        
        try {
            console.log(`å°è¯•ä»è·¯å¾„åŠ è½½ç´¢å¼•æ–‡ä»¶: ${indexPath}`);
            const response = await fetch(indexPath);
            
            if (!response.ok) {
                throw new Error(`ç´¢å¼•æ–‡ä»¶åŠ è½½å¤±è´¥: ${response.status} ${response.statusText}`);
            }
            
            // åŠ è½½ç´¢å¼•æ•°æ®
            peptideIndexData = await response.json();
            console.log(`ç´¢å¼•æ–‡ä»¶ä» ${indexPath} åŠ è½½æˆåŠŸï¼ŒåŒ…å« ${peptideIndexData.length} ä¸ªæ¡ç›®`);
            
            // ä»ç´¢å¼•æ•°æ®ä¸­æå–æ–‡ä»¶ååˆ—è¡¨
            allPeptideFiles = peptideIndexData.map(item => `${item.id}.json`);
            console.log(`ä»ç´¢å¼•ç”Ÿæˆäº† ${allPeptideFiles.length} ä¸ªæ–‡ä»¶å`);
            
            currentFilterFiles = [...allPeptideFiles]; // åˆå§‹çŠ¶æ€ä¸‹ï¼Œè¿‡æ»¤åˆ—è¡¨ç­‰äºå®Œæ•´åˆ—è¡¨
            isFiltered = false;
            
            totalPages = Math.ceil(currentFilterFiles.length / itemsPerPage);
            currentPage = 1;
            console.log(`æ€»é¡µæ•°: ${totalPages}, å½“å‰é¡µ: ${currentPage}`);
            await displayPage(currentPage);
            setupPaginationControls();
            setupResetButton(); // è®¾ç½®é‡ç½®æŒ‰é’®
            
        } catch (error) {
            console.error('åŠ è½½ç´¢å¼•æ–‡ä»¶å¤±è´¥:', error);
            alert('è­¦å‘Šï¼šæ— æ³•åŠ è½½æœç´¢ç´¢å¼•ï¼Œæœç´¢åŠŸèƒ½å¯èƒ½æ— æ³•æ­£å¸¸å·¥ä½œã€‚');
            
            // å¦‚æœç´¢å¼•åŠ è½½å¤±è´¥ï¼Œä½¿ç”¨é»˜è®¤çš„å°‘é‡æ–‡ä»¶åˆ—è¡¨ä½œä¸ºå¤‡é€‰
            const defaultFiles = ['DRAMP00001.json','DRAMP00002.json','DRAMP00003.json','DRAMP00004.json','DRAMP00005.json'];
            allPeptideFiles = defaultFiles;
            currentFilterFiles = [...allPeptideFiles];
            peptideIndexData = [];
            
            totalPages = Math.ceil(currentFilterFiles.length / itemsPerPage);
            currentPage = 1;
            await displayPage(currentPage);
            setupPaginationControls();
            setupResetButton();
        }
    }

    // æ˜¾ç¤ºæŒ‡å®šé¡µçš„æ•°æ®
    async function displayPage(page) {
        console.log(`æ˜¾ç¤ºç¬¬ ${page} é¡µæ•°æ®...`);
        currentPage = page;
        const tableBody = document.getElementById('table-body');
        const pageInfo = document.getElementById('pageInfo');
        const prevBtn = document.getElementById('prevPageBtn');
        const nextBtn = document.getElementById('nextPageBtn');

        tableBody.innerHTML = '<tr><td colspan="4" style="text-align:center; padding: 20px;">Loading...</td></tr>';

        // å–æ¶ˆä¹‹å‰å¯èƒ½è¿›è¡Œçš„é¢„åŠ è½½
        if (preloadTimer) {
            clearTimeout(preloadTimer);
            preloadTimer = null;
        }
        isPreloading = false;

        // æ ¹æ®æ˜¯å¦è¿‡æ»¤ï¼Œé€‰æ‹©ä½¿ç”¨çš„æ–‡ä»¶åˆ—è¡¨
        const filesSource = isFiltered ? currentFilterFiles : allPeptideFiles;
        totalPages = Math.ceil(filesSource.length / itemsPerPage);
        console.log(`å½“å‰æ–‡ä»¶åˆ—è¡¨åŒ…å« ${filesSource.length} ä¸ªæ–‡ä»¶, æ€»é¡µæ•°: ${totalPages}`);
        
        // ç¡®ä¿é¡µç åœ¨æœ‰æ•ˆèŒƒå›´å†…
        if (page < 1) page = 1;
        if (page > totalPages && totalPages > 0) page = totalPages;
        currentPage = page;
        
        const startIndex = (page - 1) * itemsPerPage;
        const endIndex = Math.min(page * itemsPerPage, filesSource.length);
        const filesToLoad = filesSource.slice(startIndex, endIndex);
        console.log(`æ­£åœ¨åŠ è½½ç¬¬ ${startIndex+1} åˆ° ${endIndex} æ¡æ•°æ®ï¼Œæ–‡ä»¶æ•°: ${filesToLoad.length}`);

        if (filesToLoad.length === 0) {
            tableBody.innerHTML = '<tr><td colspan="4" style="text-align:center; padding: 20px;">No data available.</td></tr>';
            updatePaginationInfo();
            return;
        }

        try {
            // ä½¿ç”¨åˆ†æ‰¹åŠ è½½ä¼˜åŒ–æ€§èƒ½
            tableBody.innerHTML = ''; // æ¸…ç©ºè¡¨æ ¼å‡†å¤‡æ¥æ”¶æ•°æ®
            
            // æ˜¾ç¤ºåŠ è½½è¿›åº¦æŒ‡ç¤ºå™¨
            const loadingRow = document.createElement('tr');
            loadingRow.id = 'loading-indicator';
            const loadingCell = document.createElement('td');
            loadingCell.colSpan = 4;
            loadingCell.style.textAlign = 'center';
            loadingCell.style.padding = '20px';
            loadingCell.innerHTML = `åŠ è½½ä¸­... <span id="loading-progress">0/${filesToLoad.length}</span>`;
            loadingRow.appendChild(loadingCell);
            tableBody.appendChild(loadingRow);
            
            // åˆ†æ‰¹å¤„ç†æ–‡ä»¶
            const batches = [];
            for (let i = 0; i < filesToLoad.length; i += BATCH_SIZE) {
                batches.push(filesToLoad.slice(i, i + BATCH_SIZE));
            }
            
            let loadedCount = 0;
            let allValidData = [];
            
            // ä¾æ¬¡åŠ è½½æ¯ä¸ªæ‰¹æ¬¡
            for (const batch of batches) {
                const batchPromises = batch.map(file => loadFileWithCache(file));
                const batchData = await Promise.all(batchPromises);
                
                // è¿‡æ»¤æœ‰æ•ˆæ•°æ®å¹¶æ·»åŠ åˆ°æ€»ç»“æœ
                const validBatchData = batchData.filter(data => data !== null);
                allValidData = allValidData.concat(validBatchData);
                
                // æ›´æ–°åŠ è½½è¿›åº¦
                loadedCount += batch.length;
                const progressElem = document.getElementById('loading-progress');
                if (progressElem) {
                    progressElem.textContent = `${loadedCount}/${filesToLoad.length}`;
                }
                
                // æ¯æ‰¹æ¬¡ç«‹å³æ¸²æŸ“ï¼Œä¸ç­‰å¾…æ‰€æœ‰æ•°æ®åŠ è½½å®Œæˆ
                renderBatchData(validBatchData);
            }
            
            // ç§»é™¤åŠ è½½æŒ‡ç¤ºå™¨
            const loadingIndicator = document.getElementById('loading-indicator');
            if (loadingIndicator) {
                loadingIndicator.remove();
            }
            
            // æ£€æŸ¥æ˜¯å¦æœ‰åŠ è½½ç»“æœ
            if (allValidData.length === 0 && filesSource.length > 0) {
                tableBody.innerHTML = `<tr><td colspan="4" style="text-align:center; padding: 20px;">${isFiltered ? 'No matching results found.' : 'Failed to load data for this page.'}</td></tr>`;
            } else if (allValidData.length === 0) {
                tableBody.innerHTML = '<tr><td colspan="4" style="text-align:center; padding: 20px;">No data available.</td></tr>';
            }
            
            if (window.tranzyInstance) {
                window.tranzyInstance.translatePage('#table-body');
            }
            
            // å½“å‰é¡µé¢åŠ è½½å®Œæˆåï¼Œå¼€å§‹é¢„åŠ è½½ä¸‹ä¸€é¡µ
            preloadNextPage();

        } catch (error) {
            console.error('æ•°æ®åŠ è½½æˆ–æ¸²æŸ“å¤±è´¥:', error);
            tableBody.innerHTML = '<tr><td colspan="4" style="text-align:center; padding: 20px;">Error loading data.</td></tr>';
        }

        updatePaginationInfo();
    }
    
    // é¢„åŠ è½½ä¸‹ä¸€é¡µæ•°æ®
    function preloadNextPage() {
        // å¦‚æœå·²ç»æ˜¯æœ€åä¸€é¡µæˆ–æ­£åœ¨é¢„åŠ è½½ï¼Œåˆ™ä¸è¿›è¡Œé¢„åŠ è½½
        if (currentPage >= totalPages || isPreloading) {
            return;
        }
        
        // è®¾ç½®å»¶è¿Ÿé¢„åŠ è½½ï¼Œç»™å½“å‰é¡µé¢æ¸²æŸ“ä¸€ç‚¹æ—¶é—´
        preloadTimer = setTimeout(async () => {
            isPreloading = true;
            
            const nextPage = currentPage + 1;
            if (nextPage <= totalPages) {
                const filesSource = isFiltered ? currentFilterFiles : allPeptideFiles;
                const startIndex = (nextPage - 1) * itemsPerPage;
                const endIndex = Math.min(nextPage * itemsPerPage, filesSource.length);
                const filesToPreload = filesSource.slice(startIndex, endIndex);
                
                console.log(`é¢„åŠ è½½ç¬¬ ${nextPage} é¡µæ•°æ®ï¼Œå…± ${filesToPreload.length} ä¸ªæ–‡ä»¶...`);
                
                // ä½¿ç”¨è¾ƒä½ä¼˜å…ˆçº§è¿›è¡Œé¢„åŠ è½½
                try {
                    // åˆ†æ‰¹é¢„åŠ è½½
                    for (let i = 0; i < filesToPreload.length; i += BATCH_SIZE) {
                        const batch = filesToPreload.slice(i, i + BATCH_SIZE);
                        // ä½¿ç”¨Promise.allSettledè€Œä¸æ˜¯Promise.allï¼Œå¿½ç•¥å•ä¸ªæ–‡ä»¶çš„åŠ è½½å¤±è´¥
                        await Promise.allSettled(batch.map(file => {
                            return loadFileWithCache(file).catch(err => {
                                console.warn(`é¢„åŠ è½½æ–‡ä»¶ ${file} å¤±è´¥:`, err);
                                return null;
                            });
                        }));
                        // åœ¨æ‰¹æ¬¡ä¹‹é—´æ·»åŠ çŸ­æš‚å»¶è¿Ÿï¼Œé¿å…é˜»å¡ä¸»çº¿ç¨‹
                        await new Promise(resolve => setTimeout(resolve, 50));
                    }
                    console.log(`ç¬¬ ${nextPage} é¡µæ•°æ®é¢„åŠ è½½å®Œæˆ`);
                } catch (error) {
                    console.warn(`é¢„åŠ è½½ç¬¬ ${nextPage} é¡µæ•°æ®å¤±è´¥:`, error);
                }
            }
            
            isPreloading = false;
        }, 500); // å»¶è¿Ÿ500mså¼€å§‹é¢„åŠ è½½
    }
    
    // åŠ è½½å•ä¸ªæ–‡ä»¶å¹¶ä½¿ç”¨ç¼“å­˜(å†…å­˜ç¼“å­˜ + IndexedDB)
    async function loadFileWithCache(file) {
        const now = Date.now();
        const cacheKey = file;
        
        // 1. æ£€æŸ¥å†…å­˜ç¼“å­˜æ˜¯å¦æœ‰æ•ˆ
        if (dataCache.has(cacheKey)) {
            const cachedItem = dataCache.get(cacheKey);
            if (now - cachedItem.timestamp < CACHE_EXPIRY) {
                console.log(`ä»å†…å­˜ç¼“å­˜åŠ è½½: ${file}`);
                return cachedItem.data;
            } else {
                // å†…å­˜ç¼“å­˜è¿‡æœŸï¼Œç§»é™¤
                dataCache.delete(cacheKey);
            }
        }
        
        // 2. æ£€æŸ¥IndexedDBç¼“å­˜
        try {
            const dbData = await getFromIndexedDB(cacheKey);
            if (dbData) {
                console.log(`ä»IndexedDBåŠ è½½: ${file}`);
                // åŒæ—¶æ›´æ–°å†…å­˜ç¼“å­˜
                dataCache.set(cacheKey, {
                    data: dbData,
                    timestamp: now
                });
                return dbData;
            }
        } catch (error) {
            console.warn(`ä»IndexedDBåŠ è½½ ${file} å¤±è´¥:`, error);
            // é”™è¯¯å¤„ç†ï¼Œç»§ç»­å°è¯•ç½‘ç»œè¯·æ±‚
        }
        
        // 3. ç¼“å­˜æœªå‘½ä¸­ï¼Œä»ç½‘ç»œåŠ è½½
        const url = `./database/${file}`;
        console.log(`ä»ç½‘ç»œåŠ è½½: ${url}`);
        
        try {
            const response = await fetch(url);
            if (!response.ok) {
                console.error(`Failed to load ${file}: ${response.status} ${response.statusText}`);
                return null;
            }
            
            const data = await response.json();
            
            // ä¿å­˜åˆ°å†…å­˜ç¼“å­˜
            dataCache.set(cacheKey, {
                data: data,
                timestamp: now
            });
            
            // ä¿å­˜åˆ°IndexedDB
            saveToIndexedDB(cacheKey, data).catch(err => {
                console.warn(`ä¿å­˜ ${file} åˆ°IndexedDBå¤±è´¥:`, err);
            });
            
            return data;
        } catch (error) {
            console.error(`Error fetching ${file}:`, error);
            return null;
        }
    }
    
    // æ¸²æŸ“ä¸€æ‰¹æ•°æ®åˆ°è¡¨æ ¼
    function renderBatchData(batchData) {
        const tableBody = document.getElementById('table-body');
        
        batchData.forEach(data => {
            // æ£€æŸ¥æ•°æ®ç»“æ„ï¼Œé€‚é…ä¸åŒæ ¼å¼
            let id, name, sequence;
            
            if (data['Sequence Information']) {
                // æ–°æ ¼å¼ï¼Œæ•°æ®åœ¨Sequence Informationå¯¹è±¡å†…
                const seqInfo = data['Sequence Information'];
                id = seqInfo['DRAMP ID'];
                name = seqInfo['Peptide Name'];
                sequence = seqInfo['Sequence'];
            } else {
                // æ—§æ ¼å¼ï¼Œæ•°æ®ç›´æ¥åœ¨æ ¹çº§åˆ«
                id = data['DRAMP ID'];
                name = data['Peptide Name'];
                sequence = data['Sequence'];
            }
            
            // ç¡®ä¿æ‰€æœ‰å­—æ®µéƒ½æœ‰å€¼
            id = id || "æœªçŸ¥ID";
            name = name || "æœªçŸ¥åç§°";
            sequence = sequence || "æœªçŸ¥åºåˆ—";
            
            const row = document.createElement('tr');
            
            const idCell = document.createElement('td');
            idCell.textContent = id;
            row.appendChild(idCell);
            
            const nameCell = document.createElement('td');
            nameCell.textContent = name;
            row.appendChild(nameCell);
            
            const sequenceCell = document.createElement('td');
            sequenceCell.textContent = sequence;
            row.appendChild(sequenceCell);
            
            const actionCell = document.createElement('td');
            const viewButton = document.createElement('button');
            viewButton.className = 'view-btn';
            viewButton.textContent = 'View'; // ç¨åä¼šè¢«Tranzyç¿»è¯‘
            viewButton.onclick = function() {
                const url = `peptide_card.html?DRAMP ID=${encodeURIComponent(id)}`;
                window.location.href = url;
            };
            actionCell.appendChild(viewButton);
            
            // æ·»åŠ VisualizeæŒ‰é’®
            const visualizeButton = document.createElement('button');
            visualizeButton.className = 'view-btn';
            visualizeButton.style.marginLeft = '5px';
            visualizeButton.style.backgroundColor = '#7597de';
            visualizeButton.textContent = 'Visualize'; // ç¨åä¼šè¢«Tranzyç¿»è¯‘
            visualizeButton.onclick = function() {
                const url = `amp_visualization.html?id=${encodeURIComponent(id)}`;
                window.location.href = url;
            };
            actionCell.appendChild(visualizeButton);
            
            row.appendChild(actionCell);
            
            // å°†åŠ è½½æŒ‡ç¤ºå™¨å‰é¢æ’å…¥æ–°è¡Œ
            const loadingIndicator = document.getElementById('loading-indicator');
            if (loadingIndicator) {
                tableBody.insertBefore(row, loadingIndicator);
            } else {
                tableBody.appendChild(row);
            }
        });
    }
    
    // æ¸…ç†è¿‡æœŸç¼“å­˜
    function clearCache() {
        // æ¸…ç†å†…å­˜ç¼“å­˜
        const now = Date.now();
        for (const [key, value] of dataCache.entries()) {
            if (now - value.timestamp > CACHE_EXPIRY) {
                dataCache.delete(key);
            }
        }
        
        // æ¸…ç†IndexedDBç¼“å­˜ï¼ˆæ¯å¤©æ¸…ç†ä¸€æ¬¡ï¼Œä½¿ç”¨æ¦‚ç‡æ§åˆ¶ï¼‰
        if (Math.random() < 0.1) {  // çº¦10%çš„å‡ ç‡æ‰§è¡Œæ¸…ç†
            cleanupIndexedDB().catch(err => {
                console.warn('æ¸…ç†IndexedDBç¼“å­˜å¤±è´¥:', err);
            });
        }
    }
    
    // å®šæœŸæ¸…ç†ç¼“å­˜
    setInterval(clearCache, 60000); // æ¯åˆ†é’Ÿæ¸…ç†ä¸€æ¬¡è¿‡æœŸç¼“å­˜

    // æ›´æ–°åˆ†é¡µä¿¡æ¯å’ŒæŒ‰é’®çŠ¶æ€
    function updatePaginationInfo() {
        const pageInfo = document.getElementById('pageInfo');
        const prevBtn = document.getElementById('prevPageBtn');
        const nextBtn = document.getElementById('nextPageBtn');
        
        if (totalPages === 0) {
            pageInfo.textContent = "Page 0 of 0";
            prevBtn.disabled = true;
            nextBtn.disabled = true;
        } else {
            pageInfo.textContent = `Page ${currentPage} of ${totalPages}`;
            prevBtn.disabled = currentPage === 1;
            nextBtn.disabled = currentPage === totalPages;
        }
        
        // æ§åˆ¶é‡ç½®æŒ‰é’®çš„æ˜¾ç¤º
        document.getElementById('resetSearchBtn').style.display = isFiltered ? 'inline-block' : 'none';
    }

    // è·å–ä¿å­˜çš„è¯­è¨€åå¥½
    function getLanguagePreference() {
      return localStorage.getItem('preferredLanguage') || 'en';
    }

    // ä¿å­˜è¯­è¨€åå¥½
    function saveLanguagePreference(lang) {
      localStorage.setItem('preferredLanguage', lang);
    }
    
    // è·å–è¯­è¨€æ˜¾ç¤ºåç§°
    function getLanguageDisplayName(langCode) {
      const langNames = {
        'en': 'English',
        'zh-Hans': 'ä¸­æ–‡ (ç®€ä½“)',
        'zh-Hant': 'ç¹é«”ä¸­æ–‡',
        'ja': 'æ—¥æœ¬èª',
        'ko': 'í•œêµ­ì–´',
        'fr': 'FranÃ§ais',
        'de': 'Deutsch',
        'es': 'EspaÃ±ol',
        'ru': 'Ğ ÑƒÑÑĞºĞ¸Ğ¹'
      };
      return langNames[langCode] || langCode;
    }

    // æ›´æ–°å½“å‰è¯­è¨€æ˜¾ç¤º - ç¡®ä¿ä¸ç¿»è¯‘è¯­è¨€åç§°
    function updateCurrentLanguageDisplay() {
      const currentLang = document.getElementById('currentLang');
      const currentLangText = document.getElementById('currentLangText');
      
      // æ›´æ–°æ–‡æœ¬å†…å®¹
      currentLangText.textContent = getLanguageDisplayName(document.documentElement.lang);
      
      // ç¡®ä¿è¯­è¨€åç§°ä¸è¢«ç¿»è¯‘
      currentLang.classList.add('no-translate');
      currentLangText.classList.add('no-translate');
    }

    // åˆå§‹åŒ–ç¿»è¯‘å‡½æ•°
    function initializeTranslation(lang) {
      const tranzy = new Tranzy.Translator({
        toLang: lang,
        fromLang: 'en',
        ignore: ['.no-translate', 'input', 'select', '.search-icon', '.language-dropdown a'],
        manualDict: window.specialTerms
      });
      
      tranzy.translatePage();
      tranzy.startObserver();
      
      // å°†ç¿»è¯‘å®ä¾‹ä¿å­˜åˆ°å…¨å±€å˜é‡ï¼Œä»¥ä¾¿ä¹‹åé”€æ¯
      window.tranzyInstance = tranzy;
    }
    
    // æä¾›ä¸€ä¸ªå…¨å±€å‡½æ•°ç”¨äºåŠ¨æ€æ·»åŠ æˆ–ä¿®æ”¹ç‰¹æ®Šåè¯
    window.updateSpecialTerm = function(term, translation, language) {
      language = language || document.documentElement.lang;
      if (!window.specialTerms[language]) {
        window.specialTerms[language] = {};
      }
      window.specialTerms[language][term] = translation;
      
      // å¦‚æœå½“å‰è¯­è¨€åŒ¹é…ï¼Œç«‹å³åº”ç”¨æ›´æ–°
      if (language === document.documentElement.lang && window.tranzyInstance) {
        window.tranzyInstance.destroy();
        initializeTranslation(language);
      }
    };

    // è®¾ç½®åˆ†é¡µæŒ‰é’®äº‹ä»¶
    function setupPaginationControls() {
        const prevBtn = document.getElementById('prevPageBtn');
        const nextBtn = document.getElementById('nextPageBtn');

        prevBtn.addEventListener('click', () => {
            if (currentPage > 1) {
                displayPage(currentPage - 1);
            }
        });

        nextBtn.addEventListener('click', () => {
            if (currentPage < totalPages) {
                displayPage(currentPage + 1);
            }
        });
    }

    // è®¾ç½®é‡ç½®æŒ‰é’®äº‹ä»¶
    function setupResetButton() {
        const resetBtn = document.getElementById('resetSearchBtn');
        resetBtn.addEventListener('click', () => {
            // æ¸…ç©ºè¾“å…¥æ¡†
            document.getElementById("idInput").value = '';
            document.getElementById("nameInput").value = '';
            document.getElementById("sequenceInput").value = '';
            document.getElementById("lengthInput").value = '';
            
            // é‡ç½®è¿‡æ»¤çŠ¶æ€å’Œæ•°æ®
            isFiltered = false;
            currentFilterFiles = [...allPeptideFiles];
            displayPage(1); // æ˜¾ç¤ºç¬¬ä¸€é¡µçš„å…¨éƒ¨æ•°æ®
        });
    }

    // åˆå§‹åŒ–IndexedDB
    async function initIndexedDB() {
      return new Promise((resolve, reject) => {
        // æ‰“å¼€æ•°æ®åº“è¿æ¥
        const request = window.indexedDB.open(DB_NAME, DB_VERSION);
        
        // å¤„ç†æ•°æ®åº“å‡çº§äº‹ä»¶
        request.onupgradeneeded = function(event) {
          const db = event.target.result;
          // åˆ›å»ºå¯¹è±¡å­˜å‚¨ï¼Œä½¿ç”¨æ–‡ä»¶åä½œä¸ºé”®
          if (!db.objectStoreNames.contains(STORE_NAME)) {
            const store = db.createObjectStore(STORE_NAME, { keyPath: 'id' });
            // åˆ›å»ºæ—¶é—´æˆ³ç´¢å¼•ï¼Œç”¨äºç®¡ç†è¿‡æœŸæ•°æ®
            store.createIndex('timestamp', 'timestamp', { unique: false });
          }
          console.log('IndexedDBå­˜å‚¨åˆ›å»ºæˆåŠŸ');
        };
        
        // å¤„ç†è¿æ¥æˆåŠŸ
        request.onsuccess = function(event) {
          db = event.target.result;
          console.log('IndexedDBè¿æ¥æˆåŠŸ');
          resolve();
        };
        
        // å¤„ç†é”™è¯¯
        request.onerror = function(event) {
          console.error('IndexedDBè¿æ¥å¤±è´¥:', event.target.error);
          reject(event.target.error);
        };
      });
    }
    
    // ä»IndexedDBè¯»å–æ•°æ®
    async function getFromIndexedDB(key) {
      return new Promise((resolve, reject) => {
        if (!db) {
          return resolve(null); // æ•°æ®åº“æœªåˆå§‹åŒ–ï¼Œè¿”å›null
        }
        
        try {
          const transaction = db.transaction([STORE_NAME], 'readonly');
          const store = transaction.objectStore(STORE_NAME);
          const request = store.get(key);
          
          request.onsuccess = function(event) {
            const result = event.target.result;
            if (result) {
              // æ£€æŸ¥ç¼“å­˜æ˜¯å¦è¿‡æœŸ
              if (Date.now() - result.timestamp < INDEXED_DB_EXPIRY) {
                resolve(result.data);
              } else {
                // è¿‡æœŸåˆ é™¤
                deleteFromIndexedDB(key);
                resolve(null);
              }
            } else {
              resolve(null);
            }
          };
          
          request.onerror = function(event) {
            console.error('ä»IndexedDBè¯»å–å¤±è´¥:', event.target.error);
            resolve(null); // å¤±è´¥è¿”å›nullè€Œä¸æ˜¯rejectï¼Œé¿å…ä¸­æ–­æµç¨‹
          };
        } catch (error) {
          console.error('IndexedDBè¯»å–æ“ä½œå¼‚å¸¸:', error);
          resolve(null);
        }
      });
    }
    
    // ä¿å­˜æ•°æ®åˆ°IndexedDB
    async function saveToIndexedDB(key, data) {
      return new Promise((resolve, reject) => {
        if (!db) {
          return resolve(false); // æ•°æ®åº“æœªåˆå§‹åŒ–ï¼Œè¿”å›å¤±è´¥
        }
        
        try {
          const transaction = db.transaction([STORE_NAME], 'readwrite');
          const store = transaction.objectStore(STORE_NAME);
          
          // å‡†å¤‡å­˜å‚¨å¯¹è±¡
          const storeObj = {
            id: key,
            data: data,
            timestamp: Date.now()
          };
          
          const request = store.put(storeObj);
          
          request.onsuccess = function() {
            resolve(true);
          };
          
          request.onerror = function(event) {
            console.error('ä¿å­˜åˆ°IndexedDBå¤±è´¥:', event.target.error);
            resolve(false);
          };
        } catch (error) {
          console.error('IndexedDBå†™å…¥æ“ä½œå¼‚å¸¸:', error);
          resolve(false);
        }
      });
    }
    
    // ä»IndexedDBåˆ é™¤æ•°æ®
    async function deleteFromIndexedDB(key) {
      return new Promise((resolve, reject) => {
        if (!db) {
          return resolve(false);
        }
        
        try {
          const transaction = db.transaction([STORE_NAME], 'readwrite');
          const store = transaction.objectStore(STORE_NAME);
          const request = store.delete(key);
          
          request.onsuccess = function() {
            resolve(true);
          };
          
          request.onerror = function(event) {
            console.error('ä»IndexedDBåˆ é™¤å¤±è´¥:', event.target.error);
            resolve(false);
          };
        } catch (error) {
          console.error('IndexedDBåˆ é™¤æ“ä½œå¼‚å¸¸:', error);
          resolve(false);
        }
      });
    }
    
    // æ¸…ç†è¿‡æœŸçš„IndexedDBæ•°æ®
    async function cleanupIndexedDB() {
      return new Promise((resolve, reject) => {
        if (!db) {
          return resolve(false);
        }
        
        try {
          const transaction = db.transaction([STORE_NAME], 'readwrite');
          const store = transaction.objectStore(STORE_NAME);
          const index = store.index('timestamp');
          
          // è·å–è¿‡æœŸæ—¶é—´ç‚¹å‰çš„æ‰€æœ‰è®°å½•
          const expiryTime = Date.now() - INDEXED_DB_EXPIRY;
          const range = IDBKeyRange.upperBound(expiryTime);
          
          const request = index.openCursor(range);
          let deletedCount = 0;
          
          request.onsuccess = function(event) {
            const cursor = event.target.result;
            if (cursor) {
              // åˆ é™¤è¿‡æœŸè®°å½•
              store.delete(cursor.primaryKey);
              deletedCount++;
              cursor.continue();
            } else {
              console.log(`å·²æ¸…ç† ${deletedCount} æ¡è¿‡æœŸçš„IndexedDBç¼“å­˜`);
              resolve(true);
            }
          };
          
          request.onerror = function(event) {
            console.error('æ¸…ç†IndexedDBå¤±è´¥:', event.target.error);
            resolve(false);
          };
        } catch (error) {
          console.error('IndexedDBæ¸…ç†æ“ä½œå¼‚å¸¸:', error);
          resolve(false);
        }
      });
    }

    // æ·»åŠ å¤„ç†URLå‚æ•°çš„å‡½æ•°
    function processUrlParameters() {
        const urlParams = new URLSearchParams(window.location.search);
        const query = urlParams.get('query');
        const category = urlParams.get('category') || 'all';
        
        if (query) {
            // æ ¹æ®ç±»åˆ«å¡«å……å¯¹åº”çš„è¾“å…¥æ¡†
            if (category === 'id' || category === 'all') {
                document.getElementById('idInput').value = query;
            } else if (category === 'name') {
                document.getElementById('nameInput').value = query;
            } else if (category === 'sequence') {
                document.getElementById('sequenceInput').value = query;
            }
            
            // æ·»åŠ æœç´¢æŒ‰é’®åŠ¨ç”»æ•ˆæœ
            const searchButton = document.querySelector('.search-btn');
            searchButton.classList.add('searching');
            
            // æ·»åŠ åˆ°æœ€è¿‘æœç´¢
            addToRecentSearches(query, category);
            
            // æ‰§è¡Œæœç´¢
            setTimeout(() => {
                search();
                searchButton.classList.remove('searching');
            }, 600);
        }
    }

    // æ·»åŠ åˆ°æœ€è¿‘æœç´¢ï¼ˆä¿æŒä¸é¦–é¡µåŒæ­¥ï¼‰
    function addToRecentSearches(query, category) {
        // ä»localStorageè·å–ç°æœ‰çš„æœ€è¿‘æœç´¢
        let recentSearches = JSON.parse(localStorage.getItem('recentSearches') || '[]');
        
        // åˆ›å»ºæ–°çš„æœç´¢æ¡ç›®
        const newSearch = {
            query: query,
            category: category,
            timestamp: Date.now()
        };
        
        // æ£€æŸ¥æ˜¯å¦å·²å­˜åœ¨ç›¸åŒæŸ¥è¯¢ï¼Œå¦‚æœå­˜åœ¨åˆ™ç§»é™¤
        recentSearches = recentSearches.filter(item => item.query !== query);
        
        // æ·»åŠ æ–°æœç´¢åˆ°åˆ—è¡¨å¼€å¤´
        recentSearches.unshift(newSearch);
        
        // åªä¿ç•™æœ€è¿‘5æ¡æœç´¢è®°å½•
        if (recentSearches.length > 5) {
            recentSearches = recentSearches.slice(0, 5);
        }
        
        // æ›´æ–°localStorage
        localStorage.setItem('recentSearches', JSON.stringify(recentSearches));
    }

    // ç§»åŠ¨ç«¯æ¨ªå±æç¤ºåŠŸèƒ½
    function initOrientationModal() {
        const orientationModal = document.getElementById('orientationModal');
        
        if (!orientationModal) {
            console.warn('æ¨ªå±æç¤ºæ¨¡æ€æ¡†æœªæ‰¾åˆ°');
            return;
        }
        
        function isMobileDevice() {
            const userAgent = navigator.userAgent.toLowerCase();
            const mobileKeywords = ['mobile', 'android', 'iphone', 'ipad', 'ipod', 'blackberry', 'windows phone', 'webos'];
            const isMobileUserAgent = mobileKeywords.some(keyword => userAgent.includes(keyword));
            const hasTouch = 'ontouchstart' in window || navigator.maxTouchPoints > 0;
            const isSmallScreen = window.innerWidth <= 1024;
            return isMobileUserAgent || (hasTouch && isSmallScreen);
        }
        
        function getOrientation() {
            if (screen.orientation) {
                return screen.orientation.angle === 0 || screen.orientation.angle === 180 ? 'portrait' : 'landscape';
            }
            const aspectRatio = window.innerWidth / window.innerHeight;
            return aspectRatio > 1.2 ? 'landscape' : 'portrait';
        }
        
        function toggleOrientationModal(show) {
            if (show) {
                orientationModal.classList.add('show');
                document.body.style.overflow = 'hidden';
                setTimeout(() => {
                    const content = orientationModal.querySelector('.orientation-content');
                    if (content) {
                        content.style.animation = 'modalSlideIn 0.6s cubic-bezier(0.34, 1.56, 0.64, 1)';
                    }
                }, 100);
            } else {
                orientationModal.classList.remove('show');
                document.body.style.overflow = '';
            }
        }
        
        function checkOrientationNeed() {
            const isMobile = isMobileDevice();
            const isPortrait = getOrientation() === 'portrait';
            const isLandscape = getOrientation() === 'landscape';
            const isDismissed = sessionStorage.getItem('orientationTipDismissed') === 'true';
            const closeBtn = document.getElementById('orientationCloseBtn');
            if (closeBtn) {
                closeBtn.style.display = isLandscape ? 'flex' : 'none';
            }
            if (isMobile && isPortrait && !isDismissed) {
                setTimeout(() => toggleOrientationModal(true), 500);
            } else {
                toggleOrientationModal(false);
            }
        }
        
        function debounce(func, wait) {
            let timeout;
            return function executedFunction(...args) {
                const later = () => {
                    clearTimeout(timeout);
                    func(...args);
                };
                clearTimeout(timeout);
                timeout = setTimeout(later, wait);
            };
        }
        
        const debouncedCheck = debounce(checkOrientationNeed, 300);
        
        function setupOrientationListeners() {
            if (screen.orientation) {
                screen.orientation.addEventListener('change', debouncedCheck);
            }
            window.addEventListener('orientationchange', debouncedCheck);
            window.addEventListener('resize', debouncedCheck);
            document.addEventListener('visibilitychange', () => {
                if (!document.hidden) {
                    setTimeout(debouncedCheck, 100);
                }
            });
        }
        
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape' && orientationModal.classList.contains('show')) {
                if (getOrientation() === 'landscape') {
                    toggleOrientationModal(false);
                }
            }
        });
        
        const orientationContent = orientationModal.querySelector('.orientation-content');
        if (orientationContent) {
            orientationContent.addEventListener('click', (e) => e.stopPropagation());
        }
        
        orientationModal.addEventListener('click', (e) => {
            if (e.target === orientationModal && getOrientation() === 'landscape') {
                toggleOrientationModal(false);
            }
        });
        
        const orientationCloseBtn = document.getElementById('orientationCloseBtn');
        if (orientationCloseBtn) {
            orientationCloseBtn.addEventListener('click', () => {
                toggleOrientationModal(false);
                sessionStorage.setItem('orientationTipDismissed', 'true');
            });
        }
        
        checkOrientationNeed();
        setupOrientationListeners();
        setInterval(() => {
            if (orientationModal.classList.contains('show')) {
                if (getOrientation() === 'landscape') {
                    toggleOrientationModal(false);
                }
            }
        }, 5000);
        window.addEventListener('load', () => setTimeout(checkOrientationNeed, 1000));
    }
  </script>
<footer style="background-color: #fbfafd; color: white; padding: 40px 20px;">
  <div style="display: flex; justify-content: space-between; flex-wrap: wrap; max-width: 1200px; margin: auto;">
    
    <!-- About Section -->
    <div style="flex: 1; min-width: 200px; margin-bottom: 20px;">
      <h4 style="color: #9db4f0;">About</h4>
      <ul style="list-style: none; padding: 0;">
        <li><a href="#" style="color: rgb(18, 17, 17); text-decoration: none;">About SPADE</a></li>
        <li><a href="#" style="color: rgb(18, 17, 17); text-decoration: none;">Advertising policy</a></li>
        <li><a href="#" style="color:rgb(0, 0, 0); text-decoration: none;">Attribution & citations</a></li>
      </ul>
    </div>

    <!-- Terms & Privacy Section -->
    <div style="flex: 1; min-width: 200px; margin-bottom: 20px;">
      <h4 style="color: #9db4f0;">Terms & privacy</h4>
      <ul style="list-style: none; padding: 0;">
        <li><a href="#" style="color:rgb(0, 0, 0); text-decoration: none;">Terms of use</a></li>
        <li><a href="#" style="color: rgb(0, 0, 0); text-decoration: none;">Editorial policy</a></li>
        <li><a href="#" style="color: rgb(0, 0, 0); text-decoration: none;">Privacy policy</a></li>
      </ul>
    </div>

    <!-- Support Section -->
    <div style="flex: 1; min-width: 200px; margin-bottom: 20px;">
      <h4 style="color: #9db4f0;">Support</h4>
      <ul style="list-style: none; padding: 0;">
        <li><a href="#" style="color: rgb(0, 0, 0); text-decoration: none;">Help center</a></li>
        <li><a href="#" style="color: rgb(0, 0, 0); text-decoration: none;">Sitemap</a></li>
        <li><a href="#" style="color:rgb(0, 0, 0); text-decoration: none;">Contact us</a></li>
      </ul>
    </div>
  </div>

  <div style="text-align: right; padding-top: 20px; color: #aaa; max-width: 1200px; margin: auto;">
    &copy; SPADE.
  </div>
</footer>  
</body>
</html>
